{"version":3,"sources":["AppContext.js","containers/register/Register.js","containers/init/Init.js","layouts/supporter/Supporter.js","layouts/admin/NewSchool.js","layouts/admin/ListSupporters.js","layouts/admin/Messages.js","layouts/admin/EditSchool.js","layouts/admin/Admin.js","App.jsx","containers/new-user/NewUser.js","index.js"],"names":["React","createContext","Register","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_onChangeInput","key","e","value","target","setState","_ref","form","objectSpread","defineProperty","_onSubmit","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","state","email","name","group","loading","register","alert","stop","desc","role","_this2","_this$state","blockMsg","display","isLocked","regForm","react_default","createElement","className","style","htmlFor","id","onChange","disabled","autoComplete","groups","keys","map","g","i","onClick","Component","register_Register","AppContext","Consumer","app","Register_Register","Init","server","process","Supporter","appendToMessageList","snap","msg","val","current","concat","toConsumableArray","updateConversation","userData","user","conversation","$tid","status","newConversations","conversations","filter","c","unshift","sort","b","lastMsg","time","_ref2","onClickConversation","open","text","messRef","off","firebase","ref","DB_PREFIX","orderByKey","limitToLast","on","preventDefault","currentUser","getIdToken","then","idToken","axios","post","tid","resp","data","error","catch","err","message","toggle","dropdown","out","window","confirm","ok","location","reload","greet","console","log","renderConversation","m","page","onSubmit","width","ButtonDropdown","isOpen","DropdownToggle","color","DropdownMenu","DropdownItem","placeholder","type","Icon_default","currentGroup","convRef","orderByChild","startAt","endAt","messagesEnd","createRef","prevProps","prevState","snapshot","length","animateScroll","scrollToBottom","containerId","_this$state2","bgRead","background-color","bgUnread","AppBar_default","position","background","Toolbar_default","Typography_default","variant","substring","supporter_Supporter","Supporter_Supporter","NewSchool","khoi","tự_nhiên","xã_hội","lực_lượng_vũ_trang","cao_đẳng_nghề","handleClose","handleSave","school","set","changeInput","changeCheckbox","checked","_this$props","Dialog_default","onClose","aria-labelledby","maxWidth","DialogTitle_default","DialogContent_default","TextField_default","autoFocus","margin","label","fullWidth","FormControlLabel_default","control","Checkbox_default","DialogActions_default","Button_default","ListSupporters","updateUsers","users","decodeFirebaseArray","editUser","$uid","removeTempKeys","changeSwitch","equalTo","once","List_default","dense","ListItem_default","ListItemIcon_default","AccountCircle_default","ListItemText_default","primary","secondary","ListItemSecondaryAction_default","IconButton_default","aria-label","Create_default","Switch_default","admin_ListSupporters","ListSupporters_ListSupporters","Messages","isnew","displayMessage","index_es","answeredBy","moment","format","Comment_default","admin_Messages","Messages_Messages","EditSchool","xoa_dau","str","replace","Admin","updateSchool","clickSchool","s","selectedSchool","messages","clickAllMessages","_addNewSchool","addNewSchool","editSchool","schoolRef","search","admin_NewSchool","assign","admin_EditSchool","toLowerCase","includes","toLocaleLowerCase","admin_Admin","Admin_Admin","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","App","_doLogin","urlParams","URLSearchParams","get","password","appState","signInWithEmailAndPassword","uId","_getUserInfo","uid","_doRegister","gr","createUserWithEmailAndPassword","_register","userId","_changeState","changedState","arr","id_name","Array","isArray","obj","nObj","forEach","startsWith","renderApp","combinedProps","src","init_Init","Provider","changeState","withStyles","root","flexGrow","grow","menuButton","marginLeft","marginRight","ReactDOM","render","react_router_dom","src_App","document","getElementById"],"mappings":"kPAEeA,MAAMC,cAAc,uDCC7BC,cACF,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAaVQ,eAAiB,SAACC,GAAD,OAAS,SAACC,GAAM,IACtBC,EAASD,EAAEE,OAAXD,MAEPV,EAAKY,SAAS,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,KAAF,MAAa,CACvBA,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEa,EADHb,OAAAe,EAAA,EAAAf,CAAA,GAECO,EAAME,SApBAV,EAyBnBiB,UAzBmBhB,OAAAiB,EAAA,EAAAjB,CAAAkB,EAAAC,EAAAC,KAyBP,SAAAC,IAAA,IAAAR,EAAA,OAAAK,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aACDZ,EAAQd,EAAK2B,MAAbb,MACEc,OAASd,EAAKe,MAAQf,EAAKgB,OAF5B,CAAAN,EAAAE,KAAA,eAGJ1B,EAAKY,SAAS,CACVmB,SAAS,IAJTP,EAAAE,KAAA,EAME1B,EAAKD,MAAMiC,SAASlB,GANtB,OAOJd,EAAKY,SAAS,CACVmB,SAAS,IARTP,EAAAE,KAAA,eAWJO,MAAM,sEAXF,wBAAAT,EAAAU,SAAAZ,MAtBRtB,EAAK2B,MAAQ,CACTb,KAAM,CACFc,MAAO5B,EAAKD,MAAM6B,OAAS,GAC3BC,KAAM,GACNC,MAAO,GACPK,KAAM,GACNC,KAAM,IATCpC,wEAwCV,IAAAqC,EAAAlC,KAAAmC,EACmBnC,KAAKwB,MAAtBb,EADFwB,EACExB,KAAMiB,EADRO,EACQP,QACTQ,EAAW,CACpBC,QAASrC,KAAKJ,MAAM0C,SAAW,OAAS,QAGrCC,EAAU,CACbF,QAASrC,KAAKJ,MAAM0C,SAAW,OAAS,QAGnC,OACIE,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,YACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,aACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,sBAAsBC,MAAOP,GAA5C,uFAC0CI,EAAAvB,EAAAwB,cAAA,WAD1C,0FAGAD,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,sBAAsBC,MAAOJ,GACxCC,EAAAvB,EAAAwB,cAAA,SAAOC,UAAW,cAAlB,mHAA8FF,EAAAvB,EAAAwB,cAAA,WAC9FD,EAAAvB,EAAAwB,cAAA,SAAOG,QAAS,SAAhB,SACAJ,EAAAvB,EAAAwB,cAAA,SACIC,UAAW,eACXG,GAAI,QACJtC,MAAOI,EAAKc,MACZqB,SAAU9C,KAAKI,eAAe,SAC9B2C,UAAQ,IAEZP,EAAAvB,EAAAwB,cAAA,SAAOG,QAAS,QAAhB,qCACAJ,EAAAvB,EAAAwB,cAAA,SACIC,UAAW,eACXnC,MAAOI,EAAKe,KACZmB,GAAI,OACJG,aAAc,MACdF,SAAU9C,KAAKI,eAAe,UAElCoC,EAAAvB,EAAAwB,cAAA,SAAOG,QAAS,SAAhB,0BACAJ,EAAAvB,EAAAwB,cAAA,UACIC,UAAU,gBACVnC,MAAOI,EAAKgB,MACZkB,GAAI,QACJC,SAAU9C,KAAKI,eAAe,UAE9BoC,EAAAvB,EAAAwB,cAAA,qDACCzC,KAAKJ,MAAMqD,QAAUnD,OAAOoD,KAAKlD,KAAKJ,MAAMqD,QAAQE,IAAI,SAACC,EAAGC,GAAJ,OAAUb,EAAAvB,EAAAwB,cAAA,UAC/DpC,IAAKgD,EACL9C,MAAO6C,GAENlB,EAAKtC,MAAMqD,OAAOG,GAAG1B,SAU9Bc,EAAAvB,EAAAwB,cAAA,SAAOG,QAAS,QAAhB,oBACAJ,EAAAvB,EAAAwB,cAAA,SACIC,UAAW,eACXnC,MAAOI,EAAKqB,KACZa,GAAI,OACJG,aAAc,MACdF,SAAU9C,KAAKI,eAAe,UAElCoC,EAAAvB,EAAAwB,cAAA,UAAQC,UAAW,uBAAwBY,QAAStD,KAAKc,UAAWiC,SAAUnB,GAA9E,kCAzGD2B,aAiHRC,EAAA,SAAU5D,GACrB,OACI4C,EAAAvB,EAAAwB,cAACgB,EAAWC,SAAZ,KACK,SAACC,GAAD,OAASnB,EAAAvB,EAAAwB,cAACmB,EAAD9D,OAAAc,EAAA,EAAAd,CAAA,GAEC6D,EACA/D,OC1GRiE,mLAZP,OACIrB,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,YACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,aACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,uBACXF,EAAAvB,EAAAwB,cAAA,SAAOC,UAAW,cAAlB,iEANLa,yJCYbO,EAASC,2BAETC,cACF,SAAAA,EAAYpE,GAAO,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAgE,IACfnE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAkE,GAAA7D,KAAAH,KAAMJ,KA+BVqE,oBAAsB,SAACC,GACnB,IAAMC,EAAMD,EAAKE,MACjBvE,EAAKY,SAAS,SAAAC,GAAA,IAAE2D,EAAF3D,EAAE2D,QAAF,MAAgB,CAC1BA,QAAO,GAAAC,OAAAxE,OAAAyE,EAAA,EAAAzE,CACAuE,GADA,CAEHF,QArCOtE,EA0CnB2E,mBAAqB,SAACN,GAClB,IAAMO,EAAW5E,EAAKD,MAAM8E,KACtBC,EAAeT,EAAKE,OAAS,GAGnC,GAFAO,EAAaC,KAAOV,EAAK7D,KAEG,IAAxBsE,EAAaE,QAAwC,IAAxBF,EAAaE,SAC1CF,EAAahD,QAAU8C,EAAS9C,MAApC,CAGA,IAAMmD,EAAmBjF,EAAK2B,MAAMuD,cAAcC,OAAO,SAAAC,GACrD,OAAOA,EAAEL,OAASD,EAAaC,OAGnCE,EAAiBI,QAAQP,GAEzBG,EAAiBK,KAAK,SAAClE,EAAGmE,GACtB,OAAKnE,EAAEoE,SAAYD,EAAEC,QACjBpE,EAAEoE,QAAQC,KAAOF,EAAEC,QAAQC,MACnB,EACDrE,EAAEoE,QAAQC,KAAOF,EAAEC,QAAQC,KAC3B,EAEJ,EAN8B,IASzCzF,EAAKY,SAAS,SAAA8E,KAAER,cAAF,MAAsB,CAChCA,cAAeD,OApEJjF,EAwEnB2F,oBAAsB,SAACP,GAAD,OAAO,WACzB,GAAIpF,EAAK2B,MAAMiE,MAAQ5F,EAAK2B,MAAMiE,KAAKb,OAASK,EAAEL,KAO9C,OANA/E,EAAKY,SAAS,CACVgF,KAAM,KACNpB,QAAS,GACTqB,KAAM,UAEN7F,EAAK8F,SAAS9F,EAAK8F,QAAQC,IAAI,cAAe/F,EAAKoE,sBAI3DpE,EAAKY,SAAS,CACVgF,KAAMR,EACNZ,QAAS,GACTqB,KAAM,KAGV7F,EAAK8F,QAAUE,aACVC,IAAIjG,EAAKD,MAAMmG,UAAY,sBAAwBlG,EAAKD,MAAM8E,KAAK/C,MAAQ,IAAMsD,EAAEL,MACnFoB,aACAC,YAAY,IAEjBpG,EAAK8F,QAAQO,GAAG,cAAerG,EAAKoE,uBA9FrBpE,EAiGnBiB,UAAY,SAACmE,GAAD,OAAO,SAAC3E,GAEhB,GADAA,EAAE6F,iBACEtG,EAAK2B,MAAMkE,KAAM,OAAOG,SAAgBO,YAAYC,YAAW,GAAMC,KAAK,SAACC,GAAY,IAChFb,EAAQ7F,EAAK2B,MAAbkE,KACPc,IAAMC,KAAN,WAAAnC,OAAsBR,EAAtB,mCAA+D,CAC3DyC,UACAG,IAAKzB,EAAEL,KACPc,SAECY,KAAK,SAAAK,GAAQ,IACHC,EAAQD,EAARC,KACP,GAAIA,EAAKC,MAAO,OAAO/E,MAAM8E,EAAKC,OAClChH,EAAKY,SAAS,CACViF,KAAM,OAGboB,MAAM,SAAAC,GAAG,OAAIjF,MAAMiF,EAAIC,SAAWD,OAEtCD,MAAM,SAAAxG,GAAC,OAAIwB,MAAMxB,EAAE0G,SAAW1G,OAnHpBT,EAsHnBoH,OAAS,WACLpH,EAAKY,SAAS,CACVyG,UAAWrH,EAAK2B,MAAM0F,YAxHXrH,EA4HnBsH,IAAM,WACGC,OAAOC,QAAQ,uGACpBxB,SAAgBO,YAAYC,YAAW,GAAMC,KAAK,SAACC,GAC/C,OAAOC,IAAMC,KAAN,WAAAnC,OAAsBR,EAAtB,mCAA+D,CAClEyC,UACAG,IAAO7G,EAAK2B,MAAMiE,KAAKb,OAEtB0B,KAAK,SAAAgB,GACFF,OAAOG,SAASC,WAEnBV,MAAM,SAAAC,GAAG,OAAIjF,MAAMiF,QAtIblH,EA0InB4H,MAAQ,WACJ,OAAO5B,SAAgBO,YAAYC,YAAW,GAAMC,KAAK,SAACC,GACtD,IAAMtB,EAAIpF,EAAK2B,MAAMiE,KACrBiC,QAAQC,IAAI,OAEZnB,IAAMC,KAAN,GAAAnC,OAAcP,2BAAd,mCAA6E,CACzEwC,UACAG,IAAKzB,EAAEL,KACPc,KAAM7F,EAAKD,MAAM8E,KAAK1C,OAErBsE,KAAK,SAAAK,GAAQ,IACHC,EAAQD,EAARC,KACP,GAAIA,EAAKC,MAAO,OAAO/E,MAAM8E,EAAKC,SAErCC,MAAM,SAAAC,GAAG,OAAIjF,MAAMiF,EAAIC,SAAWD,OAEtCD,MAAM,SAAAxG,GAAC,OAAIwB,MAAMxB,EAAE0G,SAAW1G,MA1JpBT,EA6JnB+H,mBAAqB,WAAM,IAAAzF,EACWtC,EAAK2B,MAAhC6C,EADgBlC,EAChBkC,QAASoB,EADOtD,EACPsD,KAAMyB,EADC/E,EACD+E,SAEtB,OAAO1E,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,kBACnBF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,oBAAqBY,QAASzD,EAAK2F,oBAAoBC,IAAOjD,EAAAvB,EAAAwB,cAAA,kCAA9E,MAAoG5C,EAAK2B,MAAMiE,KAAK/D,MACpHc,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,kBAAkBG,GAAI,YAChCwB,EAAQlB,IAAI,SAAC0E,EAAGxE,GAAJ,OAAUb,EAAAvB,EAAAwB,cAAA,OAAKpC,IAAKgD,EAAGX,UAAW,WAC3CF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAWmF,EAAEC,KAAO,OAAS,SAC9BtF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,SAAUmF,EAAEnC,WAIxClD,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,QACZF,EAAAvB,EAAAwB,cAAA,QAAMC,UAAW,cAAeqF,SAAUlI,EAAKiB,UAAU2E,IACrDjD,EAAAvB,EAAAwB,cAAA,OAAKE,MAAO,CACRqF,MAAO,QAEPxF,EAAAvB,EAAAwB,cAAEwF,EAAA,EAAF,CAAiBC,OAAQhB,EAAUD,OAAQpH,EAAKoH,OAAQtE,MAAO,CAACqF,MAAO,QACnExF,EAAAvB,EAAAwB,cAAC0F,EAAA,EAAD,CAAgBC,MAAO,WAAW5F,EAAAvB,EAAAwB,cAAA,KAAGC,UAAU,iBAE/CF,EAAAvB,EAAAwB,cAAC4F,EAAA,EAAD,KACI7F,EAAAvB,EAAAwB,cAAC6F,EAAA,EAAD,CAAchF,QAASzD,EAAK4H,OAA5B,sCAGAjF,EAAAvB,EAAAwB,cAAC6F,EAAA,EAAD,CAAchF,QAASzD,EAAKsH,KAA5B,4BAMZ3E,EAAAvB,EAAAwB,cAAA,SAAOC,UAAW,eAAgB6F,YAAa,yBAAgBhI,MAAOV,EAAK2B,MAAMkE,KAC1E5C,SAAU,SAAAxC,GAAC,OAAIT,EAAKY,SAAS,CAACiF,KAAMpF,EAAEE,OAAOD,WACpDiC,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,YACZF,EAAAvB,EAAAwB,cAAA,UAAQ+F,KAAM,SAAU7F,MAAO,CAACyF,MAAO,SACnC5F,EAAAvB,EAAAwB,cAACgG,EAAAxH,EAAD,mBA7LpB,IAAMyH,EAAe7I,EAAKD,MAAM8E,KAAK/C,MAFtB,OAIf9B,EAAK8I,QAAU9C,aACVC,IAAIjG,EAAKD,MAAMmG,UAAY,wBAA0B2C,GACrDE,aAAa,UACbC,QAAQ,GACRC,MAAM,GACXjJ,EAAK8F,QAAU,KAEf9F,EAAK8I,QAAQzC,GAAG,cAAerG,EAAK2E,oBACpC3E,EAAK8I,QAAQzC,GAAG,gBAAiBrG,EAAK2E,oBACtC3E,EAAKkJ,YAActJ,IAAMuJ,YAEzBnJ,EAAK2B,MAAQ,CACTuD,cAAe,GACfU,KAAM,KACNpB,QAAS,GACTqB,KAAM,GACNwB,UAAU,GApBCrH,kFAwBAoJ,EAAWC,EAAWC,GACjCD,EAAU7E,QAAQ+E,SAAWpJ,KAAKwB,MAAM6C,QAAQ+E,QAChDC,gBAAcC,eAAe,CACzBC,YAAa,8CA8KtB,IAAArH,EAAAlC,KACQ0E,EAAQ1E,KAAKJ,MAAb8E,KADR8E,EAE+BxJ,KAAKwB,MAA5BuD,EAFRyE,EAEQzE,cAAeU,EAFvB+D,EAEuB/D,KAChBgE,EAAS,CAAEC,mBAAoB,QAC/BC,EAAW,CAAED,mBAAoB,QAEvC,OACIlH,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,aACZF,EAAAvB,EAAAwB,cAACmH,EAAA3I,EAAD,CAAQ4I,SAAS,SAASlH,MAAO,CAACmH,WAAY,YAC1CtH,EAAAvB,EAAAwB,cAACsH,EAAA9I,EAAD,KACIuB,EAAAvB,EAAAwB,cAACuH,EAAA/I,EAAD,CAAYgJ,QAAQ,KAAK7B,MAAM,WAA/B,oBAGR5F,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,kBACZF,EAAAvB,EAAAwB,cAAA,QAAMC,UAAU,cAAhB,gBAA6CF,EAAAvB,EAAAwB,cAAA,QAC7CC,UAAW,oBADkC,IACZgC,EAAKhD,MACrC+D,EAAOzF,KAAK4H,qBACT7C,EAAc5B,IAAI,SAAC8B,EAAG5B,GAAJ,OAAUb,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,2BAA4BrC,IAAKgD,EAAGC,QAASpB,EAAKsD,oBAAoBP,GAAItC,MAAmB,GAAZsC,EAAEJ,OAAc4E,EAASE,GACpI,GAAZ1E,EAAEJ,OACErC,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,SAASF,EAAAvB,EAAAwB,cAAA,SAAIwC,EAAEvD,OAC/Bc,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,SAAUuC,EAAEvD,MAElCc,EAAAvB,EAAAwB,cAAA,OACIC,UAAW,2BAA4BuC,EAAEI,QAAQK,KAAKwE,UAAU,EAAE,KAAMjF,EAAEI,QAAQK,KAAK0D,OAAS,IAAM,GAAK,mBAjOnH7F,aAyOT4G,EAAA,SAAUvK,GACrB,OACI4C,EAAAvB,EAAAwB,cAACgB,EAAWC,SAAZ,KACK,SAACC,GAAD,OAASnB,EAAAvB,EAAAwB,cAAC2H,EAADtK,OAAAc,EAAA,EAAAd,CAAA,GAEC6D,EACA/D,qJCxFRyK,8MA1JX7I,MAAQ,CACJb,KAAM,CACFe,KAAM,GACNrB,IAAK,GACLiK,KAAM,CACFC,oBAAY,EACZC,kBAAU,EACVC,0CAAsB,EACtBC,gCAAiB,OAK7BC,YAAc,WACV9K,EAAKD,MAAMqH,YAGf2D,WAAa,WAAM,IACRjK,EAAQd,EAAK2B,MAAbb,KACAkK,EAAUhL,EAAKD,MAAfiL,OACHA,EAAOlK,EAAKN,MAAMyB,MAAM,4CAC5B+D,aAAoBC,IAAIjG,EAAKD,MAAMmG,UAAY,WAAW+E,IAA1DhL,OAAAc,EAAA,EAAAd,CAAA,GACO+K,EADP/K,OAAAe,EAAA,EAAAf,CAAA,GAEKa,EAAKN,IAAM,CACRqB,KAAMf,EAAKe,KACX4I,KAAM3J,EAAK2J,SAEhBhE,KAAK,WACJzG,EAAKY,SAAS,CACVE,KAAM,CACFe,KAAM,GACNrB,IAAK,GACLiK,KAAM,CACFC,oBAAY,EACZC,kBAAU,EACVC,0CAAsB,EACtBC,gCAAiB,MAI7B7K,EAAKD,MAAMqH,cAInB8D,YAAc,SAAC1K,GAAD,OAAS,SAACC,GAAM,IACnBC,EAASD,EAAEE,OAAXD,MACPV,EAAKY,SAAS,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,KAAF,MAAa,CACvBA,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEa,EADHb,OAAAe,EAAA,EAAAf,CAAA,GAECO,EAAME,WAKnByK,eAAiB,SAAC3K,GAAD,OAAS,SAACC,GAAM,IACtB2K,EAAW3K,EAAEE,OAAbyK,QACPpL,EAAKY,SAAS,SAAA8E,GAAA,IAAE5E,EAAF4E,EAAE5E,KAAF,MAAa,CACvBA,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEa,EADH,CAEA2J,KAAKxK,OAAAc,EAAA,EAAAd,CAAA,GACEa,EAAK2J,KADRxK,OAAAe,EAAA,EAAAf,CAAA,GAECO,EAAM4K,mFAMd,IAAAC,EACkBlL,KAAKJ,MAArB6F,EADFyF,EACEzF,KAAMwB,EADRiE,EACQjE,OACNtG,EAAQX,KAAKwB,MAAbb,KACA2J,EAAQ3J,EAAR2J,KAEP,OACI9H,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,aACXF,EAAAvB,EAAAwB,cAAC0I,EAAAlK,EAAD,CACIwE,KAAMA,EACN2F,QAASnE,EACToE,kBAAgB,oBAChBC,SAAU,MAEV9I,EAAAvB,EAAAwB,cAAC8I,EAAAtK,EAAD,CAAa4B,GAAG,qBAAhB,qCACAL,EAAAvB,EAAAwB,cAAC+I,EAAAvK,EAAD,KACIuB,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACIyK,WAAS,EACTC,OAAO,QACP9I,GAAG,MACHC,SAAU9C,KAAK+K,YAAY,OAC3Ba,MAAM,yBACNrL,MAAOI,EAAKN,IACZwL,WAAS,IAEbrJ,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACI0K,OAAO,QACP9I,GAAG,OACHC,SAAU9C,KAAK+K,YAAY,QAC3BxK,MAAOI,EAAKe,KACZkK,MAAM,0BACNC,WAAS,IAEbrJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,oBACdxH,SAAU9C,KAAKgL,eAAe,oBAC9B5C,MAAM,YAGdwD,MAAM,+BAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,kBACdxH,SAAU9C,KAAKgL,eAAe,kBAC9B5C,MAAM,YAGdwD,MAAM,6BAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,0CACdxH,SAAU9C,KAAKgL,eAAe,0CAC9B5C,MAAM,YAGdwD,MAAM,qDAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,gCACdxH,SAAU9C,KAAKgL,eAAe,gCAC9B5C,MAAM,YAGdwD,MAAM,0DAGdpJ,EAAAvB,EAAAwB,cAACwJ,EAAAhL,EAAD,KACIuB,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQqC,QAAStD,KAAK2K,YAAavC,MAAM,WAAzC,YAGA5F,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQgJ,QAAQ,YAAY3G,QAAStD,KAAK4K,WAAYxC,MAAM,WAA5D,sCAjJA7E,qMCSlB4I,eACF,SAAAA,EAAYvM,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmM,IACftM,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAqM,GAAAhM,KAAAH,KAAMJ,KAUVwM,YAAc,SAAClI,GACXrE,EAAKY,SAAS,CACV4L,MAAOxM,EAAKD,MAAM0M,oBAAoBpI,EAAKE,OAAS,GAAI,UAb7CvE,EAiBnB0M,SAAW,SAAC7H,GAAD,OAAU,WACjB7E,EAAKY,SAAS,CACV8L,SAAU7H,EAAI5E,OAAAc,EAAA,EAAAd,CAAA,GAAO4E,GAAQ,SAnBlB7E,EAuBnBkL,YAAc,SAAC1K,GAAD,OAAS,SAACC,GAAM,IACnBC,EAASD,EAAEE,OAAXD,MAEPV,EAAKY,SAAS,SAAAC,GAAA,IAAE6L,EAAF7L,EAAE6L,SAAF,MAAiB,CAC3BA,SAASzM,OAAAc,EAAA,EAAAd,CAAA,GACFyM,EADCzM,OAAAe,EAAA,EAAAf,CAAA,GAEHO,EAAME,SA7BAV,EAkCnB+K,WAAa,WAAM,IACR2B,EAAY1M,EAAK2B,MAAjB+K,SACP1G,aAAoBC,IAAIjG,EAAKD,MAAMmG,UAAY,UAAYwG,EAASC,MAAM1B,IACtEjL,EAAKD,MAAM6M,eAAeF,GACxB,SAACxF,GACC,IAAKA,EAED,OADAW,QAAQC,IAAI,KACL9H,EAAK0M,UAAL1M,GAEXiC,MAAMiF,MA3CClH,EA+CnB6M,aAAe,SAACpM,GACZ,IAAMC,EAAQD,EAAEE,OAAOyK,QAAU,IAAM,EACvCpL,EAAKY,SAAS,SAAA8E,GAAA,IAAEgH,EAAFhH,EAAEgH,SAAF,MAAiB,CAC3BA,SAASzM,OAAAc,EAAA,EAAAd,CAAA,GACFyM,EADC,CAEJtK,KAAM1B,QAlDdV,EAAK2B,MAAQ,CACT6K,MAAO,IAEXxG,aAAoBC,IAAIjG,EAAKD,MAAMmG,UAAY,UAC1C6C,aAAa,SACb+D,QAAQ9M,EAAKD,MAAMiL,QACnB+B,KAAK,SAAStG,KAAK,SAAApC,GAAI,OAAIrE,EAAKuM,YAAYlI,KARlCrE,wEAyDV,IAAAqC,EAAAlC,KAAAmC,EACqBnC,KAAKwB,MAAxB6K,EADFlK,EACEkK,MAAOE,EADTpK,EACSoK,SAEd,OACI/J,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,kBACXF,EAAAvB,EAAAwB,cAACoK,GAAA5L,EAAD,CAAM6L,OAAO,KACNT,IAAUA,EAAMjD,SACnB5G,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,iCACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,cAAhB,sFAEH2J,EAAMlJ,IAAI,SAACuB,EAAMrB,GAAP,OAAab,EAAAvB,EAAAwB,cAACsK,GAAA9L,EAAD,CAAUZ,IAAKgD,GACnCb,EAAAvB,EAAAwB,cAACuK,GAAA/L,EAAD,KACIuB,EAAAvB,EAAAwB,cAACwK,GAAAhM,EAAD,OAEJuB,EAAAvB,EAAAwB,cAACyK,GAAAjM,EAAD,CACIkM,QAASzI,EAAKhD,KACd0L,UAAW1I,EAAKzC,KAAO,KAAOO,EAAAvB,EAAAwB,cAAA,QAAMC,UAAW,cAAjB,iCAElCF,EAAAvB,EAAAwB,cAAC4K,GAAApM,EAAD,KACIuB,EAAAvB,EAAAwB,cAAC6K,GAAArM,EAAD,CAAYsM,aAAW,SAASjK,QAASpB,EAAKqK,SAAS7H,IACnDlC,EAAAvB,EAAAwB,cAAC+K,GAAAvM,EAAD,YAKhBuB,EAAAvB,EAAAwB,cAAC0I,EAAAlK,EAAD,CACIwE,KAAM8G,EACNnB,QAASpL,KAAKuM,SAAS,MACvBlB,kBAAgB,qBAEhB7I,EAAAvB,EAAAwB,cAAC8I,EAAAtK,EAAD,CAAa4B,GAAG,qBAAhB,kDACAL,EAAAvB,EAAAwB,cAAC+I,EAAAvK,EAAD,KACIuB,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACgL,GAAAxM,EAAD,CACIgK,UAASsB,GAA6B,MAAlBA,EAAStK,KAC7Ba,SAAU9C,KAAK0M,aACftE,MAAM,YAGdwD,MAAM,wCAEVpJ,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACIyK,WAAS,EACTC,OAAO,QACP9I,GAAG,QACHC,SAAU9C,KAAK+K,YAAY,SAC3Ba,MAAM,QACNrL,MAAOgM,EAAWA,EAAS9K,MAAQ,GACnC+G,KAAM,QACNqD,WAAS,IAEbrJ,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACIyK,WAAS,EACTC,OAAO,QACP9I,GAAG,OACHC,SAAU9C,KAAK+K,YAAY,QAC3Ba,MAAM,oCACNrL,MAAOgM,EAAWA,EAAS7K,KAAO,GAClCmK,WAAS,IAEbrJ,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACIyK,WAAS,EACTC,OAAO,QACP9I,GAAG,OACHC,SAAU9C,KAAK+K,YAAY,QAC3Ba,MAAM,+BACNrL,MAAOgM,EAAWA,EAASvK,KAAO,GAClC6J,WAAS,KAGjBrJ,EAAAvB,EAAAwB,cAACwJ,EAAAhL,EAAD,KACIuB,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQqC,QAAStD,KAAKuM,SAAS,MAAOnE,MAAM,WAA5C,YAGA5F,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQgJ,QAAQ,YAAY3G,QAAStD,KAAK4K,WAAYxC,MAAM,WAA5D,mCArIK7E,aA+IdmK,GAAA,SAAU9N,GACrB,OACI4C,EAAAvB,EAAAwB,cAACgB,EAAWC,SAAZ,KACK,SAACC,GAAD,OAASnB,EAAAvB,EAAAwB,cAACkL,GAAD7N,OAAAc,EAAA,EAAAd,CAAA,GAEC6D,EACA/D,2DC9JjBgO,eACF,SAAAA,EAAYhO,GAAO,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA4N,IACf/N,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA8N,GAAAzN,KAAAH,KAAMJ,KAoBV4E,mBAAqB,SAACN,GAClB,IAAMS,EAAeT,EAAKE,OAAS,GAInC,GAHAO,EAAaC,KAAOV,EAAK7D,IAEzBqH,QAAQC,IAAIhD,IACgB,IAAxBA,EAAaE,QAAwC,IAAxBF,EAAaE,SAC1CF,EAAahD,QAAU9B,EAAKD,MAAMiL,OAAtC,CAEA,IAAIgD,GAAQ,EACN/I,EAAmBjF,EAAK2B,MAAMuD,cAAc5B,IAAI,SAAA8B,GAClD,OAAIA,EAAEL,OAASD,EAAaC,MACxBiJ,GAAQ,EACDlJ,GAEJM,IAEXpF,EAAKY,SAAS,SAAAC,GAAA,IAAEqE,EAAFrE,EAAEqE,cAAF,MAAsB,CAChCA,cAAgB8I,EAA2C/I,EAA5C,CAAUH,GAAVL,OAAAxE,OAAAyE,EAAA,EAAAzE,CAA2BiF,SAtC/BlF,EA0CnBiO,eAAiB,SAAC7I,GAAD,OAAO,WACpBpF,EAAKY,SAAS,CACVwE,MAEJpF,EAAK8F,QAAUE,aACVC,IAAIjG,EAAKD,MAAMmG,UAAY,sBAAwBlG,EAAKD,MAAMiL,OAAS,IAAM5F,EAAEL,MAC/EoB,aACAC,YAAY,IAEjBpG,EAAK8F,QAAQO,GAAG,cAAerG,EAAKoE,uBAnDrBpE,EAsDnBoE,oBAAsB,SAACC,GACnB,IAAMC,EAAMD,EAAKE,MACjBvE,EAAKY,SAAS,SAAA8E,GAAA,IAAElB,EAAFkB,EAAElB,QAAF,MAAgB,CAC1BA,QAAO,GAAAC,OAAAxE,OAAAyE,EAAA,EAAAzE,CACAuE,GADA,CAEHF,QAzDR,IAAMuE,EAAe7I,EAAKD,MAAMiL,OAFjB,OAGfnD,QAAQC,IAAIe,GACZ7I,EAAK8I,QAAU9C,aACVC,IAAIjG,EAAKD,MAAMmG,UAAY,wBAA0B2C,GACrDE,aAAa,UACbC,QAAQ,GACRC,MAAM,GACXjJ,EAAK8F,QAAU,KAEf9F,EAAK2B,MAAQ,CACTuD,cAAe,GACfV,QAAS,GACTY,EAAG,MAGPpF,EAAK8I,QAAQzC,GAAG,cAAerG,EAAK2E,oBACpC3E,EAAK8I,QAAQzC,GAAG,gBAAiBrG,EAAK2E,oBAlBvB3E,wEAgEV,IAAAqC,EAAAlC,KAAAmC,EACgBnC,KAAKwB,MAAnByD,EADF9C,EACE8C,EAAGZ,EADLlC,EACKkC,QAEV,OACI7B,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,YACXF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,cAAhB,iCACCuC,EAAIzC,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,kBACbF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,kCACZF,EAAAvB,EAAAwB,cAACsL,GAAA,EAAD,KACK9I,EAAEvD,MAEPc,EAAAvB,EAAAwB,cAACsL,GAAA,EAAD,CAAQzK,QAAS,kBAAMpB,EAAKzB,SAAS,CAACwE,EAAG,SAAzC,kBAIJzC,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,mBACX2B,EAAQlB,IAAI,SAAC0E,EAAGxE,GAAJ,OAAUb,EAAAvB,EAAAwB,cAAA,OAAKpC,IAAKgD,EAAGX,UAAW,WAC3CF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAWmF,EAAEC,KAAO,OAAS,SAC9BtF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,SAAUmF,EAAEnC,YAK5ClD,EAAAvB,EAAAwB,cAACoK,GAAA5L,EAAD,KACKjB,KAAKwB,MAAMuD,cAAc5B,IAAI,SAAC8B,EAAG5B,GAAJ,OAAUb,EAAAvB,EAAAwB,cAACsK,GAAA9L,EAAD,CAAUZ,IAAKgD,GACnDb,EAAAvB,EAAAwB,cAACyK,GAAAjM,EAAD,CACIkM,QAASlI,EAAEvD,KACX0L,UAAS,6BAAA9I,OAAkBW,EAAE+I,WAApB,OAAA1J,OAAoCW,EAAEI,QAAU,4BAAoB4I,KAAOhJ,EAAEI,QAAQC,MAAM4I,OAAO,2BAA6B,MAG5I1L,EAAAvB,EAAAwB,cAAC4K,GAAApM,EAAD,KACIuB,EAAAvB,EAAAwB,cAAC6K,GAAArM,EAAD,CAAYsM,aAAW,WAAWjK,QAASpB,EAAK4L,eAAe7I,IAC3DzC,EAAAvB,EAAAwB,cAAC0L,GAAAlN,EAAD,oBAjGbsC,aA4GR6K,GAAA,SAAUxO,GACrB,OACI4C,EAAAvB,EAAAwB,cAACgB,EAAWC,SAAZ,KACK,SAACC,GAAD,OAASnB,EAAAvB,EAAAwB,cAAC4L,GAADvO,OAAAc,EAAA,EAAAd,CAAA,GAEC6D,EACA/D,OCwDR0O,8MAzKX9M,MAAQ,CACJb,KAAM,CACFe,KAAM,GACNrB,IAAK,GACLiK,KAAM,CACFC,oBAAY,EACZC,kBAAU,EACVC,0CAAsB,EACtBC,gCAAiB,OAmB7BC,YAAc,WACV9K,EAAKD,MAAMqH,YAGf2D,WAAa,WAAM,IACRjK,EAAQd,EAAK2B,MAAbb,KACAkK,EAAUhL,EAAKD,MAAfiL,OAEPhF,aAAoBC,IAAIjG,EAAKD,MAAMmG,UAAY,WAAW+E,IAA1DhL,OAAAc,EAAA,EAAAd,CAAA,GACO+K,EADP/K,OAAAe,EAAA,EAAAf,CAAA,GAEKa,EAAKN,IAAM,CACRqB,KAAMf,EAAKe,KACX4I,KAAM3J,EAAK2J,SAEhBhE,KAAK,WACJzG,EAAKY,SAAS,CACVE,KAAM,CACFe,KAAM,GACNrB,IAAK,GACLiK,KAAM,CACFC,oBAAY,EACZC,kBAAU,EACVC,0CAAsB,EACtBC,gCAAiB,MAI7B7K,EAAKD,MAAMqH,cAInB8D,YAAc,SAAC1K,GAAD,OAAS,SAACC,GAAM,IACnBC,EAASD,EAAEE,OAAXD,MACPV,EAAKY,SAAS,SAAAC,GAAA,IAAEC,EAAFD,EAAEC,KAAF,MAAa,CACvBA,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEa,EADHb,OAAAe,EAAA,EAAAf,CAAA,GAECO,EAAME,WAKnByK,eAAiB,SAAC3K,GAAD,OAAS,SAACC,GAAM,IACtB2K,EAAW3K,EAAEE,OAAbyK,QACPpL,EAAKY,SAAS,SAAA8E,GAAA,IAAE5E,EAAF4E,EAAE5E,KAAF,MAAa,CACvBA,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEa,EADH,CAEA2J,KAAKxK,OAAAc,EAAA,EAAAd,CAAA,GACEa,EAAK2J,KADRxK,OAAAe,EAAA,EAAAf,CAAA,GAECO,EAAM4K,6FA9DJhC,EAAWC,EAAWC,GACjCnJ,KAAKJ,MAAM6F,OACNwD,EAAUxD,MAAQwD,EAAUxD,KAAKpF,MAAQL,KAAKJ,MAAM6F,KAAKpF,KAC1DL,KAAKS,SAAS,CACVE,KAAKb,OAAAc,EAAA,EAAAd,CAAA,GACEE,KAAKwB,MAAMb,KACXX,KAAKJ,MAAM6F,KAAKoF,OAFnB,CAGAxK,IAAKL,KAAKJ,MAAM6F,KAAKpF,0CA6DhC,IAAA6K,EACkBlL,KAAKJ,MAArB6F,EADFyF,EACEzF,KAAMwB,EADRiE,EACQjE,OACNtG,EAAQX,KAAKwB,MAAbb,KACA2J,EAAQ3J,EAAR2J,KAEP,OACI9H,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,aACXF,EAAAvB,EAAAwB,cAAC0I,EAAAlK,EAAD,CACIwE,KAAMA,EACN2F,QAASnE,EACToE,kBAAgB,oBAChBC,SAAU,MAEV9I,EAAAvB,EAAAwB,cAAC8I,EAAAtK,EAAD,CAAa4B,GAAG,qBAAhB,qCACAL,EAAAvB,EAAAwB,cAAC+I,EAAAvK,EAAD,KACIuB,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACIyK,WAAS,EACTC,OAAO,QACP9I,GAAG,MACHC,SAAU9C,KAAK+K,YAAY,OAC3Ba,MAAM,yBACNrL,MAAOI,EAAKN,IACZwL,WAAS,EACT9I,UAAQ,IAEZP,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACI0K,OAAO,QACP9I,GAAG,OACHC,SAAU9C,KAAK+K,YAAY,QAC3BxK,MAAOI,EAAKe,KACZkK,MAAM,0BACNC,WAAS,IAEbrJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,oBACdxH,SAAU9C,KAAKgL,eAAe,oBAC9B5C,MAAM,YAGdwD,MAAM,+BAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,kBACdxH,SAAU9C,KAAKgL,eAAe,kBAC9B5C,MAAM,YAGdwD,MAAM,6BAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,0CACdxH,SAAU9C,KAAKgL,eAAe,0CAC9B5C,MAAM,YAGdwD,MAAM,qDAEVpJ,EAAAvB,EAAAwB,cAACqJ,GAAA7K,EAAD,CACI8K,QACIvJ,EAAAvB,EAAAwB,cAACuJ,GAAA/K,EAAD,CACIgK,QAASX,EAAK,gCACdxH,SAAU9C,KAAKgL,eAAe,gCAC9B5C,MAAM,YAGdwD,MAAM,0DAGdpJ,EAAAvB,EAAAwB,cAACwJ,EAAAhL,EAAD,KACIuB,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQqC,QAAStD,KAAK2K,YAAavC,MAAM,WAAzC,YAGA5F,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQgJ,QAAQ,YAAY3G,QAAStD,KAAK4K,WAAYxC,MAAM,WAA5D,oDAhKC7E,aCCzB,SAASgL,GAAQC,GAeb,OADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,GADAA,EAAMA,EAAIC,QAAQ,kHAAsC,MAC9CA,QAAQ,0EAA0B,MAClCA,QAAQ,kCAAc,MACtBA,QAAQ,kHAAsC,MAC9CA,QAAQ,4EAA0B,MAClCA,QAAQ,oCAAc,MACtBA,QAAQ,UAAM,MACdA,QAAQ,kHAAsC,MAC9CA,QAAQ,0EAA0B,MAClCA,QAAQ,kCAAc,MACtBA,QAAQ,kHAAsC,MAC9CA,QAAQ,4EAA0B,MAClCA,QAAQ,oCAAc,MACtBA,QAAQ,UAAM,SAItBC,eACF,SAAAA,EAAY9O,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0O,IACf7O,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4O,GAAAvO,KAAAH,KAAMJ,KAYV+O,aAAe,SAACzK,GACZrE,EAAKY,SAAS,SAAAC,GAAA,IAAGmK,EAAHnK,EAAGmK,OAAH,MAAiB,CAC3BA,OAAO/K,OAAAc,EAAA,EAAAd,CAAA,GACA+K,EADD/K,OAAAe,EAAA,EAAAf,CAAA,GAEDoE,EAAK7D,IAAM6D,EAAKE,YAjBVvE,EAsBnB+O,YAAc,SAACC,GAAD,OAAO,WACjBhP,EAAKY,SAAS,CACVqO,eAAgBD,EAChBE,SAAU,SAzBClP,EA6BnBmP,iBAAmB,SAACH,GAAD,OAAO,WACtBhP,EAAKY,SAAS,CACVqO,eAAgB,KAChBC,SAAUF,MAhCChP,EAoCnBoP,cAAgB,WACZpP,EAAKY,SAAS,CACVyO,cAAerP,EAAK2B,MAAM0N,gBAtCfrP,EA0CnBsP,WAAa,SAAC9O,EAAKwK,GAAN,OAAiB,WAC1B,IAAKxK,IAAQwK,EAAQ,OAAOhL,EAAKY,SAAS,CACtC0O,WAAY,OAEhBtP,EAAKY,SAAS,CACV0O,WAAY,CACR9O,MAAKwK,cA7CbhL,EAAKuP,UAAYvJ,aAAoBC,IAAIjG,EAAKD,MAAMmG,UAAY,WAChElG,EAAKuP,UAAUlJ,GAAG,cAAerG,EAAK8O,cACtC9O,EAAKuP,UAAUlJ,GAAG,gBAAiBrG,EAAK8O,cACxC9O,EAAK2B,MAAQ,CACTqJ,OAAQ,GACRqE,cAAc,EACdG,OAAQ,IATGxP,wEAqDV,IAAAqC,EAAAlC,KAAAmC,EACkEnC,KAAKwB,MAApEqJ,EADH1I,EACG0I,OAAQiE,EADX3M,EACW2M,eAAgBI,EAD3B/M,EAC2B+M,aAAcH,EADzC5M,EACyC4M,SAAUI,EADnDhN,EACmDgN,WAExD,OACI3M,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,SACXF,EAAAvB,EAAAwB,cAACmH,EAAA3I,EAAD,CAAQ4I,SAAS,UACbrH,EAAAvB,EAAAwB,cAACsH,EAAA9I,EAAD,KACIuB,EAAAvB,EAAAwB,cAACuH,EAAA/I,EAAD,CAAYgJ,QAAQ,KAAK7B,MAAM,WAA/B,iBAGR5F,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,kBAEZF,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQgJ,QAAQ,YAAY7B,MAAM,UAAU9E,QAAStD,KAAKiP,eAA1D,4BAGAzM,EAAAvB,EAAAwB,cAAA,WACAD,EAAAvB,EAAAwB,cAACgJ,EAAAxK,EAAD,CACI4B,GAAG,gBACH+I,MAAM,gDACND,OAAO,SACP1B,QAAQ,WACR4B,WAAS,EACTtL,MAAOP,KAAKwB,MAAM6N,OAClBvM,SAAU,SAACxC,GAAM,IACLC,EAAUD,EAAEE,OAAZD,MACR2B,EAAKzB,SAAS,CAAE4O,OAAQ9O,OAGhCiC,EAAAvB,EAAAwB,cAAC6M,GAADxP,OAAAyP,OAAA,CACI9J,KAAMyJ,EACNjI,OAAQjH,KAAKiP,cACbpE,OAAQA,GACJ7K,KAAKJ,QAEb4C,EAAAvB,EAAAwB,cAAC+M,GAAD1P,OAAAyP,OAAA,CACI9J,KAAM0J,EACNlI,OAAQjH,KAAKmP,aACbtE,OAAQA,GACJ7K,KAAKJ,QAEZkP,EAAiBtM,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,aAC9BF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,eAEZF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,kCACXF,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,KACK4J,EAAOiE,GAAgBpN,MAE5Bc,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQqC,QAAS,kBAAMpB,EAAKzB,SAAS,CACjCqO,eAAgB,SADpB,mBAORtM,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,aACZF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,cAAf,yDACAF,EAAAvB,EAAAwB,cAACiL,GAAD,CAAgB7C,OAAQiE,MAEvBC,EAAWvM,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,aAChCF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,eAEZF,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,kCACXF,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,KACK4J,EAAOkE,GAAUrN,MAEtBc,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CAAQqC,QAAS,kBAAMpB,EAAKzB,SAAS,CACjCsO,SAAU,SADd,mBAQRvM,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,aACZF,EAAAvB,EAAAwB,cAAC2L,GAAD,CAAUvD,OAAQkE,MAEjBvM,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,OACX5C,OAAOoD,KAAK2H,GAAQ7F,OAAO,SAAA6J,GAExB,OAAON,GADI1D,EAAOgE,GACAnN,KAAK+N,eAAeC,SAASnB,GAAQrM,EAAKV,MAAM6N,OAAOM,wBAC1ExM,IAAI,SAAC0L,EAAGxL,GAAJ,OAAUb,EAAAvB,EAAAwB,cAAA,OAAKC,UAAU,oCAAoCrC,IAAKgD,GAAGb,EAAAvB,EAAAwB,cAAA,OAAKC,UAAW,4BACxFF,EAAAvB,EAAAwB,cAAA,QACIa,QAASpB,EAAK0M,YAAYC,GAC1BnM,UAAW,UAEVmI,EAAOgE,GAAGnN,MAEfc,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CACIqC,QAASpB,EAAK8M,iBAAiBH,IADnC,qBAKArM,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CACIqC,QAASpB,EAAK0M,YAAYC,IAD9B,4CAKArM,EAAAvB,EAAAwB,cAACyJ,EAAAjL,EAAD,CACIqC,QAASpB,EAAKiN,WAAWN,EAAGhE,EAAOgE,KADvC,wDAvJhBtL,aAqKLqM,GAAA,SAAUhQ,GACrB,OACI4C,EAAAvB,EAAAwB,cAACgB,EAAWC,SAAZ,KACK,SAACC,GAAD,OAASnB,EAAAvB,EAAAwB,cAACoN,GAAD/P,OAAAc,EAAA,EAAAd,CAAA,GAEC6D,EACA/D,iBClLjBmG,ICpBgBxC,YDoBJQ,iBAEZ+L,GAAS,CACXC,OAAQ,0CACRC,WAAY,YACZC,YAAa,yCACbC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,gBAGjBC,eACF,SAAAA,EAAYzQ,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqQ,IACfxQ,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAuQ,GAAAlQ,KAAAH,KAAMJ,KAcV0Q,SAAW,WACP,IAAMC,EAAY,IAAIC,gBAAgBpJ,OAAOG,SAAS8H,QAChD5N,EAAQ8O,EAAUE,IAAI,SACtBC,EAAWH,EAAUE,IAAI,YAE/B,IAAKhP,EAAO,OAAO5B,EAAKY,SAAS,CAC7BkQ,SAAU,aAGd9Q,EAAKY,SAAS,CACVkQ,SAAU,UACVlP,QACAiP,aAGJ7K,SAAgB+K,2BACZnP,EAAOiP,GACTpK,KAAK,SAACM,GACJ/G,EAAKY,SAAS,CACVoQ,IAAKjK,EAAK4F,OAEd3M,EAAKiR,aAAalK,EAAKlC,KAAKqM,OAC7BjK,MAAM,SAACD,GACN,GAAsB,kEAAlBA,EAAMG,QAA6E,OAAOlF,MAAM,0BACpGjC,EAAKmR,YAAYvP,EAAOiP,MAvCb7Q,EA2CnBiR,aAAe,SAACC,GACZlL,aAAoBC,IAAIC,GAAY,UAAYgL,GAAKnE,KAAK,SACrDtG,KAAK,SAAApC,GACF2B,aAAoBC,IAAIC,GAAY,WAAW6G,KAAK,SAAStG,KAAK,SAAA2K,GAC9D,IAAIhO,EAASgO,EAAG7M,MAChBsD,QAAQC,IAAI1E,GACZ,IAAIwB,EAAWP,EAAKE,OAAS,GAE7B,GADAK,EAAS+H,KAAOuE,EACXtM,EAASxC,KAOP,KACIA,EAAQwC,EAARxC,KACPpC,EAAKY,SAAS,CACVkQ,SAAmB,MAAT1O,EAAgB,QAAU,YACpCyC,KAAMD,SAVV5E,EAAKY,SAAS,CACVkQ,SAAU,WACVI,MACA9N,SACAX,SAA4B,IAAlBmC,EAASxC,WAWlC6E,MAAM,SAAAC,GACHW,QAAQC,IAAIZ,MApELlH,EAwEnBmR,YAAc,SAACvP,EAAOiP,GAKlB,OAJA7Q,EAAKY,SAAS,CACVkQ,SAAU,SAGP9K,SAAgBqL,+BACnBzP,EAAOiP,GACTpK,KAAK,WACHzG,EAAKyQ,aACNxJ,MAAM,SAACxG,GACNwB,MAAM,6EAlFKjC,EAsFnBsR,UAAY,SAACzM,GACT,IAAM0M,EAASvR,EAAK2B,MAAMuP,IAC1B,OAAOlL,aAAoBC,IAAIC,GAAY,UAAYqL,GAAQtG,IAC3DjL,EAAK4M,eAAe/H,GAClB,SAACqC,GACKA,IACAW,QAAQC,IAAIZ,GACZjF,MAAM,+BAEVjC,EAAKY,SAAS,CACV6B,UAAU,IAEdR,MAAM,kHAlGCjC,EAsGnBwR,aAAe,SAACC,GAAD,OAAkBzR,EAAKY,SAAS6Q,IAtG5BzR,EAwGnByM,oBAAsB,SAACiF,EAAKC,GACxB,OAAKD,GAAOE,MAAMC,QAAQH,GAAaA,EAChCzR,OAAOoD,KAAKqO,GAAKpO,IAAI,SAAU9C,GAElC,OADAkR,EAAIlR,GAAK,IAAMmR,GAAWnR,EACnBkR,EAAIlR,MA5GAR,EAgHnB4M,eAAiB,SAACkF,GACd,IAAIC,EAAO9R,OAAOyP,OAAO,GAAIoC,GAI7B,OAHA7R,OAAOoD,KAAK0O,GAAMC,QAAQ,SAAUxR,GAC5BA,EAAIyR,WAAW,aAAaF,EAAKvR,KAElCuR,GArHQ/R,EAwHnBkS,UAAY,WAAM,IACPpB,EAAY9Q,EAAK2B,MAAjBmP,SACDqB,EAAalS,OAAAc,EAAA,EAAAd,CAAA,GACZD,EAAKD,MACLC,EAAK2B,OAEZ,MAAiB,YAAbmP,EAA+BnO,EAAAvB,EAAAwB,cAAA,SAAGD,EAAAvB,EAAAwB,cAAA,cAAQD,EAAAvB,EAAAwB,cAAA,WAAKD,EAAAvB,EAAAwB,cAAA,WAAKD,EAAAvB,EAAAwB,cAAA,OAAKwP,IAAI,gFAChD,SAAbtB,EAA4BnO,EAAAvB,EAAAwB,cAACyP,EAAD,MACf,aAAbvB,EAAgCnO,EAAAvB,EAAAwB,cAACe,EAAawO,GACjC,cAAbrB,EAAiCnO,EAAAvB,EAAAwB,cAAC0H,EAAc6H,GACnC,UAAbrB,EAA6BnO,EAAAvB,EAAAwB,cAACmN,GAAUoC,GACrC,MAjIFnM,OAAcuD,QACfvD,gBAAuBiK,IAE3BjQ,EAAK2B,MAAQ,CACTmP,SAAU,KACV5K,cAPWlG,oFAYfG,KAAKsQ,4CA4HL,OACI9N,EAAAvB,EAAAwB,cAACgB,EAAW0O,SAAZ,CACI5R,MAAO,CACHoD,IAAK3D,KAAKwB,MACV4Q,YAAapS,KAAKqR,aAClBxP,SAAU7B,KAAKmR,UACf1E,eAAgBzM,KAAKyM,eACrBH,oBAAqBtM,KAAKsM,oBAC1BvG,eAGH/F,KAAK+R,oBApJJxO,aA8JH8O,wBAtLA,CACXC,KAAM,CACFC,SAAU,GAEdC,KAAM,CACFD,SAAU,GAEdE,WAAY,CACRC,YAAa,GACbC,YAAa,KA6KNN,CAAmBhC,qBE3LlCuC,IAASC,OAAOrQ,EAAAvB,EAAAwB,cAACqQ,GAAA,EAAD,KAAetQ,EAAAvB,EAAAwB,cAACsQ,GAAD,OAAyBC,SAASC,eAAe","file":"static/js/main.ca1680bc.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport default React.createContext({})","import React, {Component} from 'react'\r\nimport AppContext from '../../AppContext'\r\n\r\nclass Register extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            form: {\r\n                email: this.props.email || '',\r\n                name: '',\r\n                group: '',\r\n                desc: '',\r\n                role: 0,\r\n            }\r\n        }\r\n    }\r\n\r\n    _onChangeInput = (key) => (e) => {\r\n        const {value} = e.target\r\n\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                [key]: value\r\n            }\r\n        }))\r\n    }\r\n\r\n    _onSubmit = async  () => {\r\n        const {form} = this.state\r\n        if (form.email && form.name && form.group) {\r\n            this.setState({\r\n                loading: true,\r\n            })\r\n            await this.props.register(form)\r\n            this.setState({\r\n                loading: false,\r\n            })\r\n        } else {\r\n            alert('Vui lòng điền đầy đủ thông tin')\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {form, loading} = this.state\r\n        var blockMsg = {\r\n\t\t\tdisplay: this.props.isLocked ? \"flex\" : \"none\"\r\n\t\t}\r\n\t\t\r\n\t\tvar regForm = {\r\n\t\t\tdisplay: this.props.isLocked ? \"none\" : \"flex\"\r\n\t\t}\r\n\r\n        return (\r\n            <div className=\"Register\">\r\n                <div className=\"container\">\r\n                    <div className=\"card card-body Card\" style={blockMsg}>\r\n                        Tài khoản của bạn chưa được kích hoạt.<br/>Bạn hãy đợi thêm hoặc thông báo với admin nhé!\r\n                    </div>\r\n                    <div className=\"card card-body Card\" style={regForm}>\r\n                        <small className={'text-muted'}>Trước tiên, bạn phải đăng ký thông tin tài khoản trước</small><br/>\r\n                        <label htmlFor={'email'}>Email</label>\r\n                        <input\r\n                            className={'form-control'}\r\n                            id={'email'}\r\n                            value={form.email}\r\n                            onChange={this._onChangeInput('email')}\r\n                            disabled\r\n                        />\r\n                        <label htmlFor={'name'}>Tên đầy đủ</label>\r\n                        <input\r\n                            className={'form-control'}\r\n                            value={form.name}\r\n                            id={'name'}\r\n                            autoComplete={'off'}\r\n                            onChange={this._onChangeInput('name')}\r\n                        />\r\n                        <label htmlFor={'group'}>Mã trường</label>\r\n                        <select\r\n                            className=\"custom-select\"\r\n                            value={form.group}\r\n                            id={'group'}\r\n                            onChange={this._onChangeInput('group')}\r\n                        >\r\n                            <option>Chọn một trường</option>\r\n                            {this.props.groups && Object.keys(this.props.groups).map((g, i) => <option\r\n                                key={i}\r\n                                value={g}\r\n                            >\r\n                                {this.props.groups[g].name}\r\n                            </option>)}\r\n                        </select>\r\n                        {/*<input*/}\r\n                            {/*className={'form-control'}*/}\r\n                            {/*value={form.group}*/}\r\n                            {/*id={'group'}*/}\r\n                            {/*onChange={this._onChangeInput('group')}*/}\r\n                            {/*autoComplete={'off'}*/}\r\n                        {/*/>*/}\r\n                        <label htmlFor={'desc'}>Lời chào</label>\r\n                        <input\r\n                            className={'form-control'}\r\n                            value={form.desc}\r\n                            id={'desc'}\r\n                            autoComplete={'off'}\r\n                            onChange={this._onChangeInput('desc')}\r\n                        />\r\n                        <button className={'btn btn-primary mt-3'} onClick={this._onSubmit} disabled={loading}>Đăng ký</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <Register\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React, {Component} from 'react'\r\n\r\nclass Init extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"Register\">\r\n                <div className=\"container\">\r\n                    <div className=\"card card-body Card\">\r\n                        <small className={'text-muted'}>Đang setup tài khoản của bạn</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Init\r\n","import React, {Component} from 'react'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Icon from '@material-ui/core/Icon'\r\nimport AppContext from '../../AppContext'\r\nimport * as firebase from 'firebase'\r\nimport axios from 'axios'\r\nimport {animateScroll} from 'react-scroll'\r\nimport ButtonDropdown from 'reactstrap/es/ButtonDropdown'\r\nimport DropdownToggle from 'reactstrap/es/DropdownToggle'\r\nimport DropdownMenu from 'reactstrap/es/DropdownMenu'\r\nimport DropdownItem from 'reactstrap/es/DropdownItem'\r\n\r\nconst server = process.env.REACT_APP_SERVER\r\n\r\nclass Supporter extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const currentGroup = this.props.user.group\r\n\r\n        this.convRef = firebase.database()\r\n            .ref(this.props.DB_PREFIX + '/conversations/group/' + currentGroup)\r\n            .orderByChild('status')\r\n            .startAt(2)\r\n            .endAt(3)\r\n        this.messRef = null\r\n\r\n        this.convRef.on('child_added', this.updateConversation)\r\n        this.convRef.on('child_changed', this.updateConversation)\r\n        this.messagesEnd = React.createRef()\r\n\r\n        this.state = {\r\n            conversations: [],\r\n            open: null,\r\n            current: [],\r\n            text: '',\r\n            dropdown: false,\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevState.current.length !== this.state.current.length) {\r\n            animateScroll.scrollToBottom({\r\n                containerId: 'MESSAGES'\r\n            })\r\n        }\r\n    }\r\n\r\n    appendToMessageList = (snap) => {\r\n        const msg = snap.val()\r\n        this.setState(({current}) => ({\r\n            current: [\r\n                ...current,\r\n                msg,\r\n            ]\r\n        }))\r\n    }\r\n\r\n    updateConversation = (snap) => {\r\n        const userData = this.props.user\r\n        const conversation = snap.val() || {}\r\n        conversation.$tid = snap.key\r\n\r\n        if (conversation.status !== 2 && conversation.status !== 3) return\r\n        if (conversation.group !== userData.group) return\r\n\r\n        // delete old conversation\r\n        const newConversations = this.state.conversations.filter(c => {\r\n            return c.$tid !== conversation.$tid\r\n        })\r\n        // add new conversation to top\r\n        newConversations.unshift(conversation)\r\n        // sort by time\r\n        newConversations.sort((a, b) => {\r\n            if (!a.lastMsg || !b.lastMsg) return 0\r\n            if (a.lastMsg.time > b.lastMsg.time) {\r\n                return -1\r\n            } else if (a.lastMsg.time < b.lastMsg.time) {\r\n                return 1\r\n            }\r\n            return 0\r\n        })\r\n\r\n        this.setState(({conversations}) => ({\r\n            conversations: newConversations\r\n        }))\r\n    }\r\n\r\n    onClickConversation = (c) => () => {\r\n        if (this.state.open && this.state.open.$tid === c.$tid) {\r\n            this.setState({\r\n                open: null,\r\n                current: [],\r\n                text: '',\r\n            })\r\n            if (this.messRef) this.messRef.off('child_added', this.appendToMessageList)\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            open: c,\r\n            current: [],\r\n            text: '',\r\n        })\r\n\r\n        this.messRef = firebase.database()\r\n            .ref(this.props.DB_PREFIX + '/conversations/msg/' + this.props.user.group + '/' + c.$tid)\r\n            .orderByKey()\r\n            .limitToLast(20)\r\n\r\n        this.messRef.on('child_added', this.appendToMessageList)\r\n    }\r\n\r\n    _onSubmit = (c) => (e) => {\r\n        e.preventDefault()\r\n        if (this.state.text) return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\r\n            const {text} = this.state\r\n            axios.post(`https://${server}/pagetuyensinh/staffSendMessage`, {\r\n                idToken,\r\n                tid: c.$tid,\r\n                text\r\n            })\r\n                .then(resp => {\r\n                    const {data} = resp\r\n                    if (data.error) return alert(data.error)\r\n                    this.setState({\r\n                        text: '',\r\n                    })\r\n                })\r\n                .catch(err => alert(err.message || err))\r\n        })\r\n            .catch(e => alert(e.message || e))\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({\r\n            dropdown: !this.state.dropdown\r\n        })\r\n    }\r\n\r\n    out = () => {\r\n        if (!window.confirm('Bạn có chắc chắn muốn kết thúc cuộc trò chuyện này?')) return\r\n        firebase.auth().currentUser.getIdToken(true).then((idToken) => {\r\n            return axios.post(`https://${server}/pagetuyensinh/staffResetStatus`, {\r\n                idToken,\r\n                'tid': this.state.open.$tid,\r\n            })\r\n                .then(ok => {\r\n                    window.location.reload()\r\n                })\r\n                .catch(err => alert(err))\r\n        })\r\n    }\r\n\r\n    greet = () => {\r\n        return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\r\n            const c = this.state.open\r\n            console.log('123')\r\n\r\n            axios.post(`${process.env.REACT_APP_SERVER}/pagetuyensinh/staffSendMessage`, {\r\n                idToken,\r\n                tid: c.$tid,\r\n                text: this.props.user.desc,\r\n            })\r\n                .then(resp => {\r\n                    const {data} = resp\r\n                    if (data.error) return alert(data.error)\r\n                })\r\n                .catch(err => alert(err.message || err))\r\n        })\r\n            .catch(e => alert(e.message || e))\r\n    }\r\n\r\n    renderConversation = () => {\r\n        const {current, open, dropdown} = this.state\r\n\r\n        return <div className={'card mt-3 mb-3'}>\r\n            <div className={'card-header Title'} onClick={this.onClickConversation(open)}><b>↩ Quay lại </b> | {this.state.open.name}</div>\r\n            <div className=\" card-body Card\" id={'MESSAGES'}>\r\n                {current.map((m, i) => <div key={i} className={'Message'}>\r\n                    <div className={m.page ? 'Ours' : 'Yours'}>\r\n                        <div className={'Textt'}>{m.text}</div>\r\n                    </div>\r\n                </div>)}\r\n            </div>\r\n            <div className={'Text'}>\r\n                <form className={'FormMessage'} onSubmit={this._onSubmit(open)}>\r\n                    <div style={{\r\n                        width: '10%'\r\n                    }}>\r\n                        < ButtonDropdown isOpen={dropdown} toggle={this.toggle} style={{width: '10%'}}>\r\n                            <DropdownToggle color={'primary'}><i className='fas fa-bars'></i>\r\n                            </DropdownToggle>\r\n                            <DropdownMenu>\r\n                                <DropdownItem onClick={this.greet}>\r\n                                    Gửi lời chào hỏi\r\n                                </DropdownItem>\r\n                                <DropdownItem onClick={this.out}>\r\n                                    Kết thúc chat\r\n                                </DropdownItem>\r\n                            </DropdownMenu>\r\n                        </ButtonDropdown>\r\n                    </div>\r\n                    <input className={'form-control'} placeholder={'Gửi tin nhắn'} value={this.state.text}\r\n                           onChange={e => this.setState({text: e.target.value})}/>\r\n                    <div className={'SendIcon'}>\r\n                        <button type={'submit'} style={{color: '#fff'}}>\r\n                            <Icon>send\r\n                            </Icon>\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    render\r\n    () {\r\n        const {user} = this.props\r\n        const {conversations, open} = this.state\r\n        const bgRead = { 'background-color': '#fff' }\r\n        const bgUnread = { 'background-color': '#eee' }\r\n\r\n        return (\r\n            <div className={'Supporter'}>\r\n                <AppBar position=\"static\" style={{background: '#3E8C33'}}>\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\">Welcome to SCS</Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <div className={'container mt-3'}>\r\n                    <span className=\"text-muted\">Xin chào,</span><span\r\n                    className={'font-weight-bold'}> {user.name}</span>\r\n                    {open ? this.renderConversation() :\r\n                        conversations.map((c, i) => <div className={'card card-body mt-3 Card'} key={i} onClick={this.onClickConversation(c)} style={c.status != 3 ? bgRead : bgUnread}>\r\n                            { c.status != 3\r\n                                ? <div className={'Title'}><b>{c.name}</b></div>\r\n                                : <div className={'Title'}>{c.name}</div>\r\n                            }\r\n                            <div\r\n                                className={'text-muted Conversation'}>{c.lastMsg.text.substring(0,100)}{c.lastMsg.text.length < 100 ? '' : '...'}</div>\r\n                        </div>)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <Supporter\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React, {Component} from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport * as firebase from 'firebase'\r\n\r\nclass NewSchool extends Component {\r\n    state = {\r\n        form: {\r\n            name: '',\r\n            key: '',\r\n            khoi: {\r\n                'tự_nhiên': false,\r\n                'xã_hội': false,\r\n                'lực_lượng_vũ_trang': false,\r\n                'cao_đẳng_nghề': false,\r\n            }\r\n        }\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.toggle()\r\n    }\r\n\r\n    handleSave = () => {\r\n        const {form} = this.state\r\n        const {school} = this.props\r\n        if (school[form.key]) alert('Mã trường trùng lặp')\r\n        firebase.database().ref(this.props.DB_PREFIX + '/groups').set({\r\n            ...school,\r\n            [form.key]: {\r\n                name: form.name,\r\n                khoi: form.khoi,\r\n            }\r\n        }).then(() => {\r\n            this.setState({\r\n                form: {\r\n                    name: '',\r\n                    key: '',\r\n                    khoi: {\r\n                        'tự_nhiên': false,\r\n                        'xã_hội': false,\r\n                        'lực_lượng_vũ_trang': false,\r\n                        'cao_đẳng_nghề': false,\r\n                    }\r\n                }\r\n            })\r\n            this.props.toggle()\r\n        })\r\n    }\r\n\r\n    changeInput = (key) => (e) => {\r\n        const {value} = e.target\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                [key]: value,\r\n            }\r\n        }))\r\n    }\r\n\r\n    changeCheckbox = (key) => (e) => {\r\n        const {checked} = e.target\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                khoi: {\r\n                    ...form.khoi,\r\n                    [key]: checked\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    render() {\r\n        const {open, toggle} = this.props\r\n        const {form} = this.state\r\n        const {khoi} = form\r\n\r\n        return (\r\n            <div className=\"NewSchool\">\r\n                <Dialog\r\n                    open={open}\r\n                    onClose={toggle}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                    maxWidth={'lg'}\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Thêm trường mới</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"key\"\r\n                            onChange={this.changeInput('key')}\r\n                            label=\"Mã trường\"\r\n                            value={form.key}\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            margin=\"dense\"\r\n                            id=\"name\"\r\n                            onChange={this.changeInput('name')}\r\n                            value={form.name}\r\n                            label=\"Tên trường\"\r\n                            fullWidth\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['tự_nhiên']}\r\n                                    onChange={this.changeCheckbox('tự_nhiên')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối tự nhiên\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['xã_hội']}\r\n                                    onChange={this.changeCheckbox('xã_hội')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối xã hội\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['lực_lượng_vũ_trang']}\r\n                                    onChange={this.changeCheckbox('lực_lượng_vũ_trang')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối lực lượng vũ trang\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['cao_đẳng_nghề']}\r\n                                    onChange={this.changeCheckbox('cao_đẳng_nghề')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Các trường cao đẳng nghề\"\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            Hủy\r\n                        </Button>\r\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\r\n                            Thêm trường\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NewSchool\r\n","import React, {Component} from 'react'\r\n\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport FolderIcon from '@material-ui/icons/AccountCircle'\r\nimport DeleteIcon from '@material-ui/icons/Create'\r\nimport * as firebase from 'firebase'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport AppContext from '../../AppContext'\r\nimport Button from '@material-ui/core/Button'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\n\r\nclass ListSupporters extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            users: []\r\n        }\r\n        firebase.database().ref(this.props.DB_PREFIX + '/users')\r\n            .orderByChild('group')\r\n            .equalTo(this.props.school)\r\n            .once('value').then(snap => this.updateUsers(snap))\r\n    }\r\n\r\n    updateUsers = (snap) => {\r\n        this.setState({\r\n            users: this.props.decodeFirebaseArray(snap.val() || {}, 'uid')\r\n        })\r\n    }\r\n\r\n    editUser = (user) => () => {\r\n        this.setState({\r\n            editUser: user ? {...user} : null,\r\n        })\r\n    }\r\n\r\n    changeInput = (key) => (e) => {\r\n        const {value} = e.target\r\n\r\n        this.setState(({editUser}) => ({\r\n            editUser: {\r\n                ...editUser,\r\n                [key]: value,\r\n            }\r\n        }))\r\n    }\r\n\r\n    handleSave = () => {\r\n        const {editUser} = this.state\r\n        firebase.database().ref(this.props.DB_PREFIX + '/users/' + editUser.$uid).set(\r\n            this.props.removeTempKeys(editUser)\r\n            , (err) => {\r\n                if (!err) {\r\n                    console.log(123)\r\n                    return this.editUser()()\r\n                }\r\n                alert(err)\r\n            })\r\n    }\r\n\r\n    changeSwitch = (e) => {\r\n        const value = e.target.checked ? 500 : 0\r\n        this.setState(({editUser}) => ({\r\n            editUser: {\r\n                ...editUser,\r\n                role: value,\r\n            }\r\n        }))\r\n    }\r\n\r\n    render() {\r\n        const {users, editUser} = this.state\r\n\r\n        return (\r\n            <div className=\"ListSupporters\">\r\n                <List dense={false}>\r\n                    {(!users || !users.length) &&\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        <div className={'text-muted'}>Không có tư vấn viên nào thuộc trường này</div>\r\n                    </div>}\r\n                    {users.map((user, i) => <ListItem key={i}>\r\n                        <ListItemIcon>\r\n                            <FolderIcon/>\r\n                        </ListItemIcon>\r\n                        <ListItemText\r\n                            primary={user.name}\r\n                            secondary={user.role ? null : <span className={'text-muted'}>Chưa kích hoạt</span>}\r\n                        />\r\n                        <ListItemSecondaryAction>\r\n                            <IconButton aria-label=\"Delete\" onClick={this.editUser(user)}>\r\n                                <DeleteIcon/>\r\n                            </IconButton>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>)}\r\n                </List>\r\n                <Dialog\r\n                    open={editUser}\r\n                    onClose={this.editUser(null)}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Sửa thông tin tư vấn viên</DialogTitle>\r\n                    <DialogContent>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={editUser ? editUser.role === 500 : false}\r\n                                    onChange={this.changeSwitch}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Kích hoạt tài khoản\"\r\n                        />\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"email\"\r\n                            onChange={this.changeInput('email')}\r\n                            label=\"Email\"\r\n                            value={editUser ? editUser.email : ''}\r\n                            type={'email'}\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"name\"\r\n                            onChange={this.changeInput('name')}\r\n                            label=\"Tên đầy đủ\"\r\n                            value={editUser ? editUser.name : ''}\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"desc\"\r\n                            onChange={this.changeInput('desc')}\r\n                            label=\"Tự giới thiệu\"\r\n                            value={editUser ? editUser.desc : ''}\r\n                            fullWidth\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.editUser(null)} color=\"primary\">\r\n                            Hủy\r\n                        </Button>\r\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\r\n                            Sửa thông tin\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <ListSupporters\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React, {Component} from 'react'\r\nimport * as firebase from 'firebase'\r\nimport AppContext from '../../AppContext'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CommentIcon from '@material-ui/icons/Comment'\r\nimport moment from 'moment'\r\nimport {Button} from '@material-ui/core'\r\n\r\nclass Messages extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const currentGroup = this.props.school\r\n        console.log(currentGroup)\r\n        this.convRef = firebase.database()\r\n            .ref(this.props.DB_PREFIX + '/conversations/group/' + currentGroup)\r\n            .orderByChild('status')\r\n            .startAt(2)\r\n            .endAt(3)\r\n        this.messRef = null\r\n\r\n        this.state = {\r\n            conversations: [],\r\n            current: [],\r\n            c: null,\r\n        }\r\n\r\n        this.convRef.on('child_added', this.updateConversation)\r\n        this.convRef.on('child_changed', this.updateConversation)\r\n    }\r\n\r\n    updateConversation = (snap) => {\r\n        const conversation = snap.val() || {}\r\n        conversation.$tid = snap.key\r\n\r\n        console.log(conversation)\r\n        if (conversation.status !== 2 && conversation.status !== 3) return\r\n        if (conversation.group !== this.props.school) return\r\n\r\n        var isnew = false\r\n        const newConversations = this.state.conversations.map(c => {\r\n            if (c.$tid === conversation.$tid) {\r\n                isnew = true\r\n                return conversation\r\n            }\r\n            return c\r\n        })\r\n        this.setState(({conversations}) => ({\r\n            conversations: !isnew ? [conversation, ...conversations] : newConversations\r\n        }))\r\n    }\r\n\r\n    displayMessage = (c) => () => {\r\n        this.setState({\r\n            c,\r\n        })\r\n        this.messRef = firebase.database()\r\n            .ref(this.props.DB_PREFIX + '/conversations/msg/' + this.props.school + '/' + c.$tid)\r\n            .orderByKey()\r\n            .limitToLast(20)\r\n\r\n        this.messRef.on('child_added', this.appendToMessageList)\r\n    }\r\n\r\n    appendToMessageList = (snap) => {\r\n        const msg = snap.val()\r\n        this.setState(({current}) => ({\r\n            current: [\r\n                ...current,\r\n                msg,\r\n            ]\r\n        }))\r\n    }\r\n\r\n    render() {\r\n        const {c, current} = this.state\r\n\r\n        return (\r\n            <div className=\"Messages\">\r\n                <div className={'text-muted'}>Quản lý tin nhắn</div>\r\n                {c ? <div className={'card card-body'}>\r\n                        <div className={'d-flex justify-content-between'}>\r\n                            <Button>\r\n                                {c.name}\r\n                            </Button>\r\n                            <Button onClick={() => this.setState({c: null})}>\r\n                                Quay lại\r\n                            </Button>\r\n                        </div>\r\n                        <div className={'MessagesWrapper'}>\r\n                            {current.map((m, i) => <div key={i} className={'Message'}>\r\n                                <div className={m.page ? 'Ours' : 'Yours'}>\r\n                                    <div className={'Textt'}>{m.text}</div>\r\n                                </div>\r\n                            </div>)}\r\n                        </div>\r\n                    </div> :\r\n                    <List>\r\n                        {this.state.conversations.map((c, i) => <ListItem key={i}>\r\n                            <ListItemText\r\n                                primary={c.name}\r\n                                secondary={`Tư vấn viên: ${c.answeredBy} - ${c.lastMsg ? 'Tin nhắn cuối: ' + moment(c.lastMsg.time).format('MMMM Do YYYY, h:mm:ss a') : ''}`}\r\n                            />\r\n\r\n                            <ListItemSecondaryAction>\r\n                                <IconButton aria-label=\"Comments\" onClick={this.displayMessage(c)}>\r\n                                    <CommentIcon/>\r\n                                </IconButton>\r\n                            </ListItemSecondaryAction>\r\n                        </ListItem>)}\r\n                    </List>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <Messages\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React, {Component} from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport * as firebase from 'firebase'\r\n\r\nclass EditSchool extends Component {\r\n    state = {\r\n        form: {\r\n            name: '',\r\n            key: '',\r\n            khoi: {\r\n                'tự_nhiên': false,\r\n                'xã_hội': false,\r\n                'lực_lượng_vũ_trang': false,\r\n                'cao_đẳng_nghề': false,\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.open) {\r\n            if (!prevProps.open || prevProps.open.key !== this.props.open.key) {\r\n                this.setState({\r\n                    form: {\r\n                        ...this.state.form,\r\n                        ...this.props.open.school,\r\n                        key: this.props.open.key,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.toggle()\r\n    }\r\n\r\n    handleSave = () => {\r\n        const {form} = this.state\r\n        const {school} = this.props\r\n\r\n        firebase.database().ref(this.props.DB_PREFIX + '/groups').set({\r\n            ...school,\r\n            [form.key]: {\r\n                name: form.name,\r\n                khoi: form.khoi,\r\n            }\r\n        }).then(() => {\r\n            this.setState({\r\n                form: {\r\n                    name: '',\r\n                    key: '',\r\n                    khoi: {\r\n                        'tự_nhiên': false,\r\n                        'xã_hội': false,\r\n                        'lực_lượng_vũ_trang': false,\r\n                        'cao_đẳng_nghề': false,\r\n                    }\r\n                }\r\n            })\r\n            this.props.toggle()\r\n        })\r\n    }\r\n\r\n    changeInput = (key) => (e) => {\r\n        const {value} = e.target\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                [key]: value,\r\n            }\r\n        }))\r\n    }\r\n\r\n    changeCheckbox = (key) => (e) => {\r\n        const {checked} = e.target\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                khoi: {\r\n                    ...form.khoi,\r\n                    [key]: checked\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    render() {\r\n        const {open, toggle} = this.props\r\n        const {form} = this.state\r\n        const {khoi} = form\r\n\r\n        return (\r\n            <div className=\"NewSchool\">\r\n                <Dialog\r\n                    open={open}\r\n                    onClose={toggle}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                    maxWidth={'lg'}\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">Thêm trường mới</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"key\"\r\n                            onChange={this.changeInput('key')}\r\n                            label=\"Mã trường\"\r\n                            value={form.key}\r\n                            fullWidth\r\n                            disabled\r\n                        />\r\n                        <TextField\r\n                            margin=\"dense\"\r\n                            id=\"name\"\r\n                            onChange={this.changeInput('name')}\r\n                            value={form.name}\r\n                            label=\"Tên trường\"\r\n                            fullWidth\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['tự_nhiên']}\r\n                                    onChange={this.changeCheckbox('tự_nhiên')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối tự nhiên\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['xã_hội']}\r\n                                    onChange={this.changeCheckbox('xã_hội')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối xã hội\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['lực_lượng_vũ_trang']}\r\n                                    onChange={this.changeCheckbox('lực_lượng_vũ_trang')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Khối lực lượng vũ trang\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Checkbox\r\n                                    checked={khoi['cao_đẳng_nghề']}\r\n                                    onChange={this.changeCheckbox('cao_đẳng_nghề')}\r\n                                    color=\"primary\"\r\n                                />\r\n                            }\r\n                            label=\"Các trường cao đẳng nghề\"\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            Hủy\r\n                        </Button>\r\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\r\n                            Sửa thông tin trường\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default EditSchool\r\n","import React, { Component } from 'react'\r\nimport AppContext from '../../AppContext'\r\nimport * as firebase from 'firebase'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport NewSchool from './NewSchool'\r\nimport ListSupporters from './ListSupporters'\r\nimport Messages from './Messages'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport EditSchool from './EditSchool'\r\n\r\nfunction xoa_dau(str) {\r\n    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\r\n    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\r\n    str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\r\n    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\r\n    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\r\n    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\r\n    str = str.replace(/đ/g, \"d\");\r\n    str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, \"A\");\r\n    str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, \"E\");\r\n    str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, \"I\");\r\n    str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, \"O\");\r\n    str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, \"U\");\r\n    str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, \"Y\");\r\n    str = str.replace(/Đ/g, \"D\");\r\n    return str;\r\n}\r\n\r\nclass Admin extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.schoolRef = firebase.database().ref(this.props.DB_PREFIX + '/groups')\r\n        this.schoolRef.on('child_added', this.updateSchool)\r\n        this.schoolRef.on('child_changed', this.updateSchool)\r\n        this.state = {\r\n            school: {},\r\n            addNewSchool: false,\r\n            search: '',\r\n        }\r\n    }\r\n\r\n    updateSchool = (snap) => {\r\n        this.setState(({ school }) => ({\r\n            school: {\r\n                ...school,\r\n                [snap.key]: snap.val(),\r\n            }\r\n        }))\r\n    }\r\n\r\n    clickSchool = (s) => () => {\r\n        this.setState({\r\n            selectedSchool: s,\r\n            messages: null,\r\n        })\r\n    }\r\n\r\n    clickAllMessages = (s) => () => {\r\n        this.setState({\r\n            selectedSchool: null,\r\n            messages: s,\r\n        })\r\n    }\r\n\r\n    _addNewSchool = () => {\r\n        this.setState({\r\n            addNewSchool: !this.state.addNewSchool,\r\n        })\r\n    }\r\n\r\n    editSchool = (key, school) => () => {\r\n        if (!key || !school) return this.setState({\r\n            editSchool: null\r\n        })\r\n        this.setState({\r\n            editSchool: {\r\n                key, school\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { school, selectedSchool, addNewSchool, messages, editSchool } = this.state\r\n\r\n        return (\r\n            <div className=\"Admin\">\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\">SCS - Admin</Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <div className={'container mt-3'}>\r\n\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={this._addNewSchool}>\r\n                        Thêm trường\r\n                    </Button>\r\n                    <br />\r\n                    <TextField\r\n                        id=\"outlined-name\"\r\n                        label=\"Tìm kiếm theo tên trường\"\r\n                        margin=\"normal\"\r\n                        variant='outlined'\r\n                        fullWidth\r\n                        value={this.state.search}\r\n                        onChange={(e) => {\r\n                            const { value } = e.target\r\n                            this.setState({ search: value })\r\n                        }}\r\n                    />\r\n                    <NewSchool\r\n                        open={addNewSchool}\r\n                        toggle={this._addNewSchool}\r\n                        school={school}\r\n                        {...this.props}\r\n                    />\r\n                    <EditSchool\r\n                        open={editSchool}\r\n                        toggle={this.editSchool()}\r\n                        school={school}\r\n                        {...this.props}\r\n                    />\r\n                    {selectedSchool ? <div className={'card mt-3'}>\r\n                        <div className={'card-header'}>\r\n\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <Button>\r\n                                    {school[selectedSchool].name}\r\n                                </Button>\r\n                                <Button onClick={() => this.setState({\r\n                                    selectedSchool: null,\r\n                                })}>\r\n                                    Quay lại\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                        <div className={'card-body'}>\r\n                            <div className=\"text-muted\">Quản lý danh sách tư vấn viên</div>\r\n                            <ListSupporters school={selectedSchool} />\r\n                        </div>\r\n                    </div> : messages ? <div className={'card mt-3'}>\r\n                        <div className={'card-header'}>\r\n\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <Button>\r\n                                    {school[messages].name}\r\n                                </Button>\r\n                                <Button onClick={() => this.setState({\r\n                                    messages: null,\r\n                                })}>\r\n                                    Quay lại\r\n                                    </Button>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className={'card-body'}>\r\n                            <Messages school={messages} />\r\n                        </div>\r\n                    </div> : <div className='row'>\r\n                                {Object.keys(school).filter(s => {\r\n                                    const sc = school[s]\r\n                                    return xoa_dau(sc.name.toLowerCase()).includes(xoa_dau(this.state.search.toLocaleLowerCase()))\r\n                                }).map((s, i) => <div className='col-12 col-md-6 col-lg-6 col-xl-6' key={i}><div className={'card card-body mt-3 Card'}>\r\n                                    <span\r\n                                        onClick={this.clickSchool(s)}\r\n                                        className={'Cursor'}\r\n                                    >\r\n                                        {school[s].name}\r\n                                    </span>\r\n                                    <Button\r\n                                        onClick={this.clickAllMessages(s)}\r\n                                    >\r\n                                        Xem tin nhắn\r\n                            </Button>\r\n                                    <Button\r\n                                        onClick={this.clickSchool(s)}\r\n                                    >\r\n                                        Quản lý tư vấn viên\r\n                            </Button>\r\n                                    <Button\r\n                                        onClick={this.editSchool(s, school[s])}\r\n                                    >\r\n                                        Sửa thông tin trường\r\n                            </Button>\r\n                                </div>\r\n                                </div>)}\r\n                            </div>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <Admin\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React, {Component} from 'react'\r\nimport AppContext from './AppContext'\r\nimport PropTypes from 'prop-types'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport * as firebase from 'firebase'\r\nimport Register from './containers/register/Register'\r\nimport Init from './containers/init/Init'\r\nimport Supporter from './layouts/supporter/Supporter'\r\nimport Admin from './layouts/admin/Admin'\r\nimport NewUser from './containers/new-user/NewUser'\r\n\r\nconst styles = {\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginLeft: -12,\r\n        marginRight: 20,\r\n    },\r\n}\r\n\r\nconst DB_PREFIX = process.env.REACT_APP_DB_PREFIX\r\n\r\nconst config = {\r\n    apiKey: 'AIzaSyBxBvZZPxo06HQWHWudRGytuJoSNw5LNX8',\r\n    authDomain: 'localhost',\r\n    databaseURL: 'https://page-tuyen-sinh.firebaseio.com',\r\n    projectId: 'page-tuyen-sinh',\r\n    storageBucket: 'page-tuyen-sinh.appspot.com',\r\n    messagingSenderId: '497060879105'\r\n}\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        if (!firebase.apps.length) {\r\n            firebase.initializeApp(config);\r\n        }\r\n        this.state = {\r\n            appState: null,\r\n            DB_PREFIX,\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        this._doLogin()\r\n    }\r\n\r\n    _doLogin = () => {\r\n        const urlParams = new URLSearchParams(window.location.search)\r\n        const email = urlParams.get('email')\r\n        const password = urlParams.get('password')\r\n\r\n        if (!email) return this.setState({\r\n            appState: 'new_user'\r\n        })\r\n\r\n        this.setState({\r\n            appState: 'loading',\r\n            email,\r\n            password,\r\n        })\r\n\r\n        firebase.auth().signInWithEmailAndPassword(\r\n            email, password\r\n        ).then((data) => {\r\n            this.setState({\r\n                uId: data.$uid\r\n            })\r\n            this._getUserInfo(data.user.uid)\r\n        }).catch((error) => {\r\n            if (error.message === 'The password is invalid or the user does not have a password.') return alert('Sai mật khẩu')\r\n            this._doRegister(email, password)\r\n        })\r\n    }\r\n\r\n    _getUserInfo = (uid) => {\r\n        firebase.database().ref(DB_PREFIX + '/users/' + uid).once('value')\r\n            .then(snap => {\r\n                firebase.database().ref(DB_PREFIX + '/groups').once('value').then(gr => {\r\n                    var groups = gr.val()\r\n                    console.log(groups)\r\n                    var userData = snap.val() || {}\r\n                    userData.$uid = uid\r\n                    if (!userData.role) {\r\n                        this.setState({\r\n                            appState: 'register',\r\n                            uid,\r\n                            groups,\r\n                            isLocked: userData.role === 0\r\n                        })\r\n                    } else {\r\n                        const {role} = userData\r\n                        this.setState({\r\n                            appState: role === 1000 ? 'admin' : 'supporter',\r\n                            user: userData,\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    _doRegister = (email, password) => {\r\n        this.setState({\r\n            appState: 'init',\r\n        })\r\n\r\n        return firebase.auth().createUserWithEmailAndPassword(\r\n            email, password\r\n        ).then(() => {\r\n            this._doLogin()\r\n        }).catch((e) => {\r\n            alert('Có lỗi xảy ra, vui lòng báo lại với admin')\r\n        })\r\n    }\r\n\r\n    _register = (user) => {\r\n        const userId = this.state.uid\r\n        return firebase.database().ref(DB_PREFIX + '/users/' + userId).set(\r\n            this.removeTempKeys(user)\r\n            , (err) => {\r\n                if (err) {\r\n                    console.log(err)\r\n                    alert('Có lỗi xảy ra')\r\n                }\r\n                this.setState({\r\n                    isLocked: true\r\n                })\r\n                alert('Đăng ký thành công, hãy chờ admin duyệt tài khoản của bạn')\r\n            });\r\n    }\r\n\r\n    _changeState = (changedState) => this.setState(changedState)\r\n\r\n    decodeFirebaseArray = (arr, id_name) => {\r\n        if (!arr || Array.isArray(arr)) return arr;\r\n        return Object.keys(arr).map(function (key) {\r\n            arr[key]['$' + id_name] = key;\r\n            return arr[key];\r\n        });\r\n    }\r\n\r\n    removeTempKeys = (obj) => {\r\n        var nObj = Object.assign({}, obj);\r\n        Object.keys(nObj).forEach(function (key) {\r\n            if (key.startsWith('$')) delete nObj[key];\r\n        });\r\n        return nObj;\r\n    }\r\n\r\n    renderApp = () => {\r\n        const {appState} = this.state\r\n        const combinedProps = {\r\n            ...this.props,\r\n            ...this.state,\r\n        }\r\n        if (appState === 'loading') return <p><center><br/><br/><img src=\"https://raw.githubusercontent.com/manh16nd/chon-truong/master/loading.gif\" /></center></p>\r\n        if (appState === 'init') return <Init/>\r\n        if (appState === 'register') return <Register {...combinedProps}/>\r\n        if (appState === 'supporter') return <Supporter {...combinedProps}/>\r\n        if (appState === 'admin') return <Admin {...combinedProps}/>\r\n        return null\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <AppContext.Provider\r\n                value={{\r\n                    app: this.state,\r\n                    changeState: this._changeState,\r\n                    register: this._register,\r\n                    removeTempKeys: this.removeTempKeys,\r\n                    decodeFirebaseArray: this.decodeFirebaseArray,\r\n                    DB_PREFIX,\r\n                }}\r\n            >\r\n                {this.renderApp()}\r\n            </AppContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nApp.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default withStyles(styles)(App)\r\n","import React, {Component} from 'react'\r\nimport * as firebase from 'firebase'\r\nimport AppContext from '../../AppContext'\r\n\r\nclass NewUser extends Component {\r\n    state = {form: {role: 500}, loading: false,}\r\n\r\n    _onChangeInput = (key) => (e) => {\r\n        const {value} = e.target\r\n        this.setState(({form}) => ({\r\n            form: {\r\n                ...form,\r\n                [key]: value\r\n            }\r\n        }))\r\n    }\r\n\r\n    _onSubmit = (e) => {\r\n        e.preventDefault()\r\n        this.setState({\r\n            loading: true,\r\n        })\r\n\r\n        const {email, password, repassword} = this.state.form\r\n        if (password !== repassword) return alert('Nhập lại mật khẩu')\r\n\r\n        firebase.auth().createUserWithEmailAndPassword(\r\n            email, password\r\n        )\r\n            .then(() => {\r\n                return firebase.auth().signInWithEmailAndPassword(email, password)\r\n                    .then(data => {\r\n                        const uId = data.$uid\r\n                        const {password, repassword, ...restUser} = this.state.form\r\n                        return firebase.database().ref(this.props.DB_PREFIX + '/users/' + uId).set(\r\n                            this.props.removeTempKeys(restUser)\r\n                            , (err) => {\r\n                                if (err) {\r\n                                    console.log(err)\r\n                                    alert('Có lỗi xảy ra')\r\n                                }\r\n                                alert('Đăng ký thành công, hãy chờ admin duyệt tài khoản của bạn')\r\n                            })\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                    })\r\n            })\r\n            .catch(e => {\r\n                const {code} = e\r\n                if (code === 'auth/email-already-in-use') return alert('Email này đã được sử dụng')\r\n                alert('Có lỗi xảy ra, vui lòng báo lại với admin')\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const {form, loading} = this.state\r\n\r\n        return (\r\n            <div className=\"NewUser mt-5\">\r\n                <div className=\"container\">\r\n                    <div className=\"card card-body Card\">\r\n                        <p className={'text-muted'}>Đăng ký tài khoản</p>\r\n                        <form onSubmit={this._onSubmit}><label htmlFor={'email'}>Email</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                id={'email'}\r\n                                value={form.email}\r\n                                autoComplete={'false'}\r\n                                onChange={this._onChangeInput('email')}\r\n                            />\r\n                            <label htmlFor={'password'}>Mật khẩu</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                id={'password'}\r\n                                value={form.password}\r\n                                autoComplete={'false'}\r\n                                onChange={this._onChangeInput('password')}\r\n                                type={'password'}\r\n                            />\r\n                            <label htmlFor={'repassword'}>Nhập lại mật khẩu</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                id={'repassword'}\r\n                                value={form.repassword}\r\n                                autoComplete={'false'}\r\n                                onChange={this._onChangeInput('repassword')}\r\n                                type={'password'}\r\n                            />\r\n                            <label htmlFor={'name'}>Tên đầy đủ</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                value={form.name}\r\n                                id={'name'}\r\n                                autoComplete={'off'}\r\n                                onChange={this._onChangeInput('name')}\r\n                            />\r\n                            <label htmlFor={'group'}>Mã trường</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                value={form.group}\r\n                                id={'group'}\r\n                                onChange={this._onChangeInput('group')}\r\n                                autoComplete={'off'}\r\n                            />\r\n                            <label htmlFor={'desc'}>Lời chào</label>\r\n                            <input\r\n                                className={'form-control'}\r\n                                value={form.desc}\r\n                                id={'desc'}\r\n                                autoComplete={'off'}\r\n                                onChange={this._onChangeInput('desc')}\r\n                            />\r\n                            <button className={'btn btn-primary mt-3'} type={'submit'} disabled={loading}>Đăng ký tài\r\n                                khoản\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default function (props) {\r\n    return (\r\n        <AppContext.Consumer>\r\n            {(app) => <NewUser\r\n                {...{\r\n                    ...app,\r\n                    ...props,\r\n                }}\r\n            />}\r\n        </AppContext.Consumer>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport './scss/index.scss'\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'))\r\n"],"sourceRoot":""}