{"version":3,"sources":["AppContext.js","containers/register/Register.js","containers/init/Init.js","layouts/supporter/Supporter.js","layouts/admin/NewSchool.js","layouts/admin/ListSupporters.js","layouts/admin/Messages.js","layouts/admin/EditSchool.js","layouts/admin/Admin.js","App.jsx","index.js"],"names":["React","createContext","Register","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_onChangeInput","key","e","value","target","setState","_ref","form","objectSpread","defineProperty","_onSubmit","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","state","email","name","group","length","loading","register","alert","stop","desc","role","_this2","_this$state","blockMsg","display","isLocked","regForm","react_default","createElement","className","style","htmlFor","id","onChange","disabled","autoComplete","groups","keys","map","g","i","placeholder","onClick","Component","register_Register","AppContext","Consumer","app","Register_Register","Init","server","process","Supporter","appendToMessageList","snap","msg","val","current","concat","toConsumableArray","updateConversation","userData","user","conversation","$tid","status","newConversations","conversations","filter","c","unshift","sort","b","lastMsg","time","_ref2","onClickConversation","open","text","messRef","off","firebase","ref","DB_PREFIX","orderByKey","limitToLast","on","preventDefault","currentUser","getIdToken","then","idToken","axios","post","tid","resp","data","error","catch","err","message","toggle","dropdown","out","window","confirm","ok","location","reload","greet","console","log","renderConversation","m","page","onSubmit","width","ButtonDropdown","isOpen","DropdownToggle","color","DropdownMenu","DropdownItem","type","Icon_default","editUser","changeInput","_ref3","handleSaveUser","$uid","set","removeTempKeys","currentGroup","convRef","orderByChild","startAt","endAt","messagesEnd","createRef","prevProps","prevState","snapshot","animateScroll","scrollToBottom","containerId","_this$state2","bgRead","background-color","bgUnread","AppBar_default","position","background","Toolbar_default","Typography_default","variant","Button_default","substring","Dialog_default","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","TextField_default","autoFocus","margin","fullWidth","DialogActions_default","supporter_Supporter","Supporter_Supporter","NewSchool","khoi","tự_nhiên","xã_hội","lực_lượng_vũ_trang","cao_đẳng_nghề","handleClose","handleSave","school","changeCheckbox","checked","_this$props","maxWidth","label","FormControlLabel_default","control","Checkbox_default","ListSupporters","updateUsers","users","decodeFirebaseArray","changeRadio","Number","changeSwitch","equalTo","List_default","dense","ListItem_default","ListItemIcon_default","AccountCircle_default","ListItemText_default","primary","ListItemSecondaryAction_default","IconButton_default","aria-label","Create_default","RadioGroup_default","Radio_default","admin_ListSupporters","ListSupporters_ListSupporters","Messages","psid","isnew","displayMessage","index_es","secondary","answeredBy","moment","format","Comment_default","admin_Messages","Messages_Messages","EditSchool","xoa_dau","str","replace","Admin","updateSchool","code","clickSchool","s","selectedSchool","messages","clickAllMessages","_addNewSchool","addNewSchool","editSchool","search","schools","forEach","showIfAdmin","admin_NewSchool","assign","admin_EditSchool","toLowerCase","includes","toLocaleLowerCase","admin_Admin","Admin_Admin","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","App","_doLogin","urlParams","URLSearchParams","get","password","appState","signInWithEmailAndPassword","uId","_getUserInfo","uid","_doRegister","once","gr","createUserWithEmailAndPassword","_register","userId","_changeState","changedState","arr","id_name","Array","isArray","obj","nObj","startsWith","renderApp","combinedProps","src","alt","init_Init","Provider","changeState","withStyles","root","flexGrow","grow","menuButton","marginLeft","marginRight","ReactDOM","render","react_router_dom","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2e8b76fe.chunk.js","sourcesContent":["import React from 'react'\n\nexport default React.createContext({})","import React, {Component} from 'react'\nimport AppContext from '../../AppContext'\n\nclass Register extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            form: {\n                email: this.props.email || '',\n                name: '',\n                group: '',\n                desc: '',\n                role: 0,\n            }\n        }\n    }\n\n    _onChangeInput = (key) => (e) => {\n        const {value} = e.target\n\n        this.setState(({form}) => ({\n            form: {\n                ...form,\n                [key]: value\n            }\n        }))\n    }\n\n    _onSubmit = async  () => {\n        const {form} = this.state\n        if (form.email && form.name && form.group && form.name.length > 10) {\n            this.setState({\n                loading: true,\n            })\n            await this.props.register(form)\n            this.setState({\n                loading: false,\n            })\n        } else {\n            alert('Vui lòng điền đầy đủ thông tin')\n        }\n    }\n\n    render() {\n        const {form, loading} = this.state\n        var blockMsg = {\n\t\t\tdisplay: this.props.isLocked ? \"flex\" : \"none\"\n\t\t}\n\t\t\n\t\tvar regForm = {\n\t\t\tdisplay: this.props.isLocked ? \"none\" : \"flex\"\n\t\t}\n\n        return (\n            <div className=\"Register\">\n                <div className=\"container\">\n                    <div className=\"card card-body Card\" style={blockMsg}>\n                        Tài khoản của bạn chưa được kích hoạt.<br/>Bạn hãy đợi thêm hoặc thông báo với admin nhé!\n                    </div>\n                    <div className=\"card card-body Card\" style={regForm}>\n                        <small className={'text-muted'}>Trước tiên, bạn phải đăng ký thông tin tài khoản trước</small><br/>\n                        <label htmlFor={'email'}>Email</label>\n                        <input\n                            className={'form-control'}\n                            id={'email'}\n                            value={form.email}\n                            onChange={this._onChangeInput('email')}\n                            disabled\n                        />\n                        <label htmlFor={'name'}>Tên đầy đủ</label>\n                        <input\n                            className={'form-control'}\n                            value={form.name}\n                            id={'name'}\n                            autoComplete={'off'}\n                            onChange={this._onChangeInput('name')}\n                        />\n                        <label htmlFor={'group'}>Mã trường</label>\n                        <select\n                            className=\"custom-select\"\n                            value={form.group}\n                            id={'group'}\n                            onChange={this._onChangeInput('group')}\n                        >\n                            <option>Chọn một trường</option>\n                            {this.props.groups && Object.keys(this.props.groups).map((g, i) => <option\n                                key={i}\n                                value={g}\n                            >\n                                {this.props.groups[g].name}\n                            </option>)}\n                        </select>\n                        {/*<input*/}\n                            {/*className={'form-control'}*/}\n                            {/*value={form.group}*/}\n                            {/*id={'group'}*/}\n                            {/*onChange={this._onChangeInput('group')}*/}\n                            {/*autoComplete={'off'}*/}\n                        {/*/>*/}\n                        <label htmlFor={'desc'}>Lời chào (là tin nhắn sẽ gửi để giới thiệu bản thân khi bạn bắt đầu trả lời tin nhắn)</label>\n                        <input\n                            className={'form-control'}\n                            value={form.desc}\n                            placeholder=\"VD: Xin chào em, anh/chị tên là ABC, học ở lớp DEF trường XYZ\"\n                            id={'desc'}\n                            autoComplete={'off'}\n                            onChange={this._onChangeInput('desc')}\n                        />\n                        <button className={'btn btn-primary mt-3'} onClick={this._onSubmit} disabled={loading}>Đăng ký</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default function (props) {\n    return (\n        <AppContext.Consumer>\n            {(app) => <Register\n                {...{\n                    ...app,\n                    ...props,\n                }}\n            />}\n        </AppContext.Consumer>\n    )\n}\n","import React, {Component} from 'react'\n\nclass Init extends Component {\n    render() {\n        return (\n            <div className=\"Register\">\n                <div className=\"container\">\n                    <div className=\"card card-body Card\">\n                        <small className={'text-muted'}>Đang setup tài khoản của bạn</small>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Init\n","import React, {Component} from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport AppContext from '../../AppContext'\nimport * as firebase from 'firebase'\nimport axios from 'axios'\nimport {animateScroll} from 'react-scroll'\nimport ButtonDropdown from 'reactstrap/es/ButtonDropdown'\nimport DropdownToggle from 'reactstrap/es/DropdownToggle'\nimport DropdownMenu from 'reactstrap/es/DropdownMenu'\nimport DropdownItem from 'reactstrap/es/DropdownItem'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\n\nconst server = process.env.REACT_APP_SERVER\n\nclass Supporter extends Component {\n    constructor(props) {\n        super(props)\n        const currentGroup = this.props.user.group\n\n        this.convRef = firebase.database()\n            .ref(this.props.DB_PREFIX + '/conversations/group/' + currentGroup)\n            .orderByChild('status')\n            .startAt(2)\n            .endAt(3)\n        this.messRef = null\n\n        this.convRef.on('child_added', this.updateConversation)\n        this.convRef.on('child_changed', this.updateConversation)\n        this.messagesEnd = React.createRef()\n\n        this.state = {\n            conversations: [],\n            open: null,\n            current: [],\n            text: '',\n            dropdown: false,\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevState.current.length !== this.state.current.length) {\n            animateScroll.scrollToBottom({\n                containerId: 'MESSAGES'\n            })\n        }\n    }\n\n    appendToMessageList = (snap) => {\n        const msg = snap.val()\n        this.setState(({current}) => ({\n            current: [\n                ...current,\n                msg,\n            ]\n        }))\n    }\n\n    updateConversation = (snap) => {\n        const userData = this.props.user\n        const conversation = snap.val() || {}\n        conversation.$tid = snap.key\n\n        if (conversation.status !== 2 && conversation.status !== 3) return\n        if (conversation.group !== userData.group) return\n\n        // delete old conversation\n        const newConversations = this.state.conversations.filter(c => {\n            return c.$tid !== conversation.$tid\n        })\n        // add new conversation to top\n        newConversations.unshift(conversation)\n        // sort by time\n        newConversations.sort((a, b) => {\n            if (!a.lastMsg || !b.lastMsg) return 0\n            if (a.lastMsg.time > b.lastMsg.time) {\n                return -1\n            } else if (a.lastMsg.time < b.lastMsg.time) {\n                return 1\n            }\n            return 0\n        })\n\n        this.setState(({conversations}) => ({\n            conversations: newConversations\n        }))\n    }\n\n    onClickConversation = (c) => () => {\n        if (this.state.open && this.state.open.$tid === c.$tid) {\n            this.setState({\n                open: null,\n                current: [],\n                text: '',\n            })\n            if (this.messRef) this.messRef.off('child_added', this.appendToMessageList)\n            return\n        }\n\n        this.setState({\n            open: c,\n            current: [],\n            text: '',\n        })\n\n        this.messRef = firebase.database()\n            .ref(this.props.DB_PREFIX + '/conversations/msg/' + this.props.user.group + '/' + c.$tid)\n            .orderByKey()\n            .limitToLast(20)\n\n        this.messRef.on('child_added', this.appendToMessageList)\n    }\n\n    _onSubmit = (c) => (e) => {\n        e.preventDefault()\n        if (this.state.text) return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\n            const {text} = this.state\n            axios.post(`https://${server}/pagetuyensinh/staffSendMessage`, {\n                idToken,\n                tid: c.$tid,\n                text\n            })\n                .then(resp => {\n                    const {data} = resp\n                    if (data.error) return alert(data.error)\n                    this.setState({\n                        text: '',\n                    })\n                })\n                .catch(err => alert(err.message || err))\n        })\n            .catch(e => alert(e.message || e))\n    }\n\n    toggle = () => {\n        this.setState({\n            dropdown: !this.state.dropdown\n        })\n    }\n\n    out = () => {\n        if (!window.confirm('Bạn có chắc chắn muốn kết thúc cuộc trò chuyện này?')) return\n        firebase.auth().currentUser.getIdToken(true).then((idToken) => {\n            return axios.post(`https://${server}/pagetuyensinh/staffResetStatus`, {\n                idToken,\n                'tid': this.state.open.$tid,\n            })\n                .then(ok => {\n                    window.location.reload()\n                })\n                .catch(err => alert(err))\n        })\n    }\n\n    greet = () => {\n        return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\n            const c = this.state.open\n            console.log('123')\n\n            axios.post(`${process.env.REACT_APP_SERVER}/pagetuyensinh/staffSendMessage`, {\n                idToken,\n                tid: c.$tid,\n                text: this.props.user.desc,\n            })\n                .then(resp => {\n                    const {data} = resp\n                    if (data.error) return alert(data.error)\n                })\n                .catch(err => alert(err.message || err))\n        })\n            .catch(e => alert(e.message || e))\n    }\n\n    renderConversation = () => {\n        const {current, open, dropdown} = this.state\n\n        return <div className={'card mt-3 mb-3'}>\n            <div className={'card-header Title'} onClick={this.onClickConversation(open)}><b>↩ Quay lại </b> | {this.state.open.name}</div>\n            <div className=\" card-body Card\" id={'MESSAGES'}>\n                {current.map((m, i) => <div key={i} className={'Message'}>\n                    <div className={m.page ? 'Ours' : 'Yours'}>\n                        <div className={'Textt'}>{m.text}</div>\n                    </div>\n                </div>)}\n            </div>\n            <div className={'Text'}>\n                <form className={'FormMessage'} onSubmit={this._onSubmit(open)}>\n                    <div style={{\n                        width: '10%'\n                    }}>\n                        < ButtonDropdown isOpen={dropdown} toggle={this.toggle} style={{width: '10%'}}>\n                            <DropdownToggle color={'primary'}><i className='fas fa-bars'></i>\n                            </DropdownToggle>\n                            <DropdownMenu>\n                                <DropdownItem onClick={this.greet}>\n                                    Gửi lời chào hỏi\n                                </DropdownItem>\n                                <DropdownItem onClick={this.out}>\n                                    Kết thúc chat\n                                </DropdownItem>\n                            </DropdownMenu>\n                        </ButtonDropdown>\n                    </div>\n                    <input className={'form-control'} placeholder={'Gửi tin nhắn'} value={this.state.text}\n                           onChange={e => this.setState({text: e.target.value})}/>\n                    <div className={'SendIcon'}>\n                        <button type={'submit'} style={{color: '#fff'}}>\n                            <Icon>send\n                            </Icon>\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    }\n\n    editUser = (user) => () => {\n        this.setState({\n            editUser: user ? {...user} : null,\n        })\n    }\n\n    changeInput = (key) => (e) => {\n        const {value} = e.target\n\n        this.setState(({editUser}) => ({\n            editUser: {\n                ...editUser,\n                [key]: value,\n            }\n        }))\n    }\n\n    handleSaveUser = () => {\n        const {editUser} = this.state\n        firebase.database().ref(this.props.DB_PREFIX + '/users/' + editUser.$uid).set(\n            this.props.removeTempKeys(editUser)\n            , (err) => {\n                if (!err) {\n                    console.log(123)\n                    return this.editUser()()\n                }\n                alert(err)\n            })\n    }\n\n    render\n    () {\n        const {user} = this.props\n        const {conversations, open, editUser} = this.state\n        const bgRead = { 'background-color': '#fff' }\n        const bgUnread = { 'background-color': '#eee' }\n\n        return (\n            <div className={'Supporter'}>\n                <AppBar position=\"static\" style={{background: '#3E8C33'}}>\n                    <Toolbar>\n                        <Typography variant=\"h6\" color=\"inherit\">Welcome to SCS</Typography>\n                    </Toolbar>\n                </AppBar>\n                <div className={'container mt-3'}>\n                    <span className=\"text-muted\">Xin chào,</span>\n                    <span className={'font-weight-bold'}> {user.name}</span>\n                    <Button onClick={this.editUser(user)} color=\"primary\">Sửa lời chào</Button>\n\n                    {open ? this.renderConversation() :\n                        conversations.map((c, i) => <div className={'card card-body mt-3 Card'} key={i} onClick={this.onClickConversation(c)} style={c.status !== 3 ? bgRead : bgUnread}>\n                            { c.status !== 3\n                                ? <div className={'Title'}><b>{c.name}</b></div>\n                                : <div className={'Title'}>{c.name}</div>\n                            }\n                            <div\n                                className={'text-muted Conversation'}>{c.lastMsg.text.substring(0,100)}{c.lastMsg.text.length < 100 ? '' : '...'}</div>\n                        </div>)}\n                </div>\n\n                <Dialog\n                    open={editUser}\n                    onClose={this.editUser(null)}\n                    aria-labelledby=\"form-dialog-title\">\n                    <DialogTitle id=\"form-dialog-title\">Sửa lời chào</DialogTitle>\n                    <DialogContent>\n                        <p>Tự giới thiệu (là tin nhắn sẽ gửi để giới thiệu bản thân khi bạn bắt đầu trả lời tin nhắn)</p>\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"desc\"\n                            onChange={this.changeInput('desc')}\n                            placeholder=\"VD: Xin chào em, anh/chị tên là ABC, học ở lớp DEF trường XYZ\"\n                            value={editUser ? editUser.desc : ''}\n                            fullWidth\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.editUser(null)} color=\"primary\">\n                            Hủy\n                        </Button>\n                        <Button variant=\"contained\" onClick={this.handleSaveUser} color=\"primary\">\n                            Sửa thông tin\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nexport default function (props) {\n    return (\n        <AppContext.Consumer>\n            {(app) => <Supporter\n                {...{\n                    ...app,\n                    ...props,\n                }}\n            />}\n        </AppContext.Consumer>\n    )\n}\n","import React, {Component} from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport * as firebase from 'firebase'\n\nclass NewSchool extends Component {\n    state = {\n        form: {\n            name: '',\n            key: '',\n            khoi: {\n                'tự_nhiên': false,\n                'xã_hội': false,\n                'lực_lượng_vũ_trang': false,\n                'cao_đẳng_nghề': false,\n            }\n        }\n    }\n\n    handleClose = () => {\n        this.props.toggle()\n    }\n\n    handleSave = () => {\n        const {form} = this.state\n        const {school} = this.props\n        if (school[form.key]) alert('Mã trường trùng lặp')\n        firebase.database().ref(this.props.DB_PREFIX + '/groups/' + form.key).set(\n            {\n                name: form.name,\n                khoi: form.khoi,\n            }\n        ).then(() => {\n            this.setState({\n                form: {\n                    name: '',\n                    key: '',\n                    khoi: {\n                        'tự_nhiên': false,\n                        'xã_hội': false,\n                        'lực_lượng_vũ_trang': false,\n                        'cao_đẳng_nghề': false,\n                    }\n                }\n            })\n            this.props.toggle()\n        })\n    }\n\n    changeInput = (key) => (e) => {\n        const {value} = e.target\n        this.setState(({form}) => ({\n            form: {\n                ...form,\n                [key]: value,\n            }\n        }))\n    }\n\n    changeCheckbox = (key) => (e) => {\n        const {checked} = e.target\n        this.setState(({form}) => ({\n            form: {\n                ...form,\n                khoi: {\n                    ...form.khoi,\n                    [key]: checked\n                }\n            }\n        }))\n    }\n\n    render() {\n        const {open, toggle} = this.props\n        const {form} = this.state\n        const {khoi} = form\n\n        return (\n            <div className=\"NewSchool\">\n                <Dialog\n                    open={open}\n                    onClose={toggle}\n                    aria-labelledby=\"form-dialog-title\"\n                    maxWidth={'lg'}\n                >\n                    <DialogTitle id=\"form-dialog-title\">Thêm trường mới</DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"key\"\n                            onChange={this.changeInput('key')}\n                            label=\"Mã trường\"\n                            value={form.key}\n                            fullWidth\n                        />\n                        <TextField\n                            margin=\"dense\"\n                            id=\"name\"\n                            onChange={this.changeInput('name')}\n                            value={form.name}\n                            label=\"Tên trường\"\n                            fullWidth\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['tự_nhiên']}\n                                    onChange={this.changeCheckbox('tự_nhiên')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối tự nhiên\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['xã_hội']}\n                                    onChange={this.changeCheckbox('xã_hội')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối xã hội\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['lực_lượng_vũ_trang']}\n                                    onChange={this.changeCheckbox('lực_lượng_vũ_trang')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối lực lượng vũ trang\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['cao_đẳng_nghề']}\n                                    onChange={this.changeCheckbox('cao_đẳng_nghề')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Các trường cao đẳng nghề\"\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClose} color=\"primary\">\n                            Hủy\n                        </Button>\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\n                            Thêm trường\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nexport default NewSchool\n","import React, {Component} from 'react'\n\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport IconButton from '@material-ui/core/IconButton'\nimport TextField from '@material-ui/core/TextField'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport FolderIcon from '@material-ui/icons/AccountCircle'\nimport DeleteIcon from '@material-ui/icons/Create'\nimport * as firebase from 'firebase'\nimport AppContext from '../../AppContext'\nimport Button from '@material-ui/core/Button'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\n\nclass ListSupporters extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            users: []\n        }\n        this.ref = firebase.database().ref(this.props.DB_PREFIX + '/users')\n            .orderByChild('group')\n            .equalTo(this.props.school)\n        this.ref.on('value', snap => this.updateUsers(snap))\n    }\n\n    componentWillUnmount() {\n        this.ref.off()\n    }\n\n    updateUsers = (snap) => {\n        this.setState({\n            users: this.props.decodeFirebaseArray(snap.val() || {}, 'uid')\n        })\n    }\n\n    editUser = (user) => () => {\n        this.setState({\n            editUser: user ? {...user} : null,\n        })\n    }\n\n    changeInput = (key) => (e) => {\n        const {value} = e.target\n\n        this.setState(({editUser}) => ({\n            editUser: {\n                ...editUser,\n                [key]: value,\n            }\n        }))\n    }\n\n    changeRadio = (key) => (e) => {\n        const {value} = e.target\n\n        this.setState(({editUser}) => ({\n            editUser: {\n                ...editUser,\n                [key]: Number(value),\n            }\n        }))\n    }\n\n    handleSave = () => {\n        const {editUser} = this.state\n        firebase.database().ref(this.props.DB_PREFIX + '/users/' + editUser.$uid).set(\n            this.props.removeTempKeys(editUser)\n            , (err) => {\n                if (!err) {\n                    console.log(123)\n                    return this.editUser()()\n                }\n                alert(err)\n            })\n    }\n\n    changeSwitch = (e) => {\n        const value = e.target.checked ? 500 : 0\n        this.setState(({editUser}) => ({\n            editUser: {\n                ...editUser,\n                role: value,\n            }\n        }))\n    }\n\n    render() {\n        const {users, editUser} = this.state\n\n        return (\n            <div className=\"ListSupporters\">\n                <List dense={false}>\n                    {(!users || !users.length) &&\n                    <div className=\"d-flex justify-content-center\">\n                        <div className={'text-muted'}>Không có tư vấn viên nào thuộc trường này</div>\n                    </div>}\n                    {users.map((user, i) => <ListItem key={i}>\n                        <ListItemIcon>\n                            <FolderIcon/>\n                        </ListItemIcon>\n                        <ListItemText\n                            primary={user.role ? user.name :\n                                <span>{user.name} - <span className={'text-muted'}>Chưa kích hoạt</span></span>}\n                        />\n                        <ListItemSecondaryAction>\n                            <IconButton aria-label=\"Delete\" onClick={this.editUser(user)}>\n                                <DeleteIcon/>\n                            </IconButton>\n                        </ListItemSecondaryAction>\n                    </ListItem>)}\n                </List>\n                <Dialog\n                    open={editUser}\n                    onClose={this.editUser(null)}\n                    aria-labelledby=\"form-dialog-title\"\n                >\n                    <DialogTitle id=\"form-dialog-title\">Sửa thông tin tư vấn viên</DialogTitle>\n                    <DialogContent>\n                        <RadioGroup\n                            aria-label={'role'}\n                            onChange={this.changeRadio('role')}\n                            value={editUser ? editUser.role : null}\n                        >\n                            <FormControlLabel value={500} control={<Radio/>} label=\"Tư vấn viên\"/>\n                            <FormControlLabel value={800} control={<Radio/>} label=\"Biên tập viên\"/>\n                            <FormControlLabel value={0} control={<Radio/>} label=\"Hủy kích hoạt\"/>\n                        </RadioGroup>\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"email\"\n                            onChange={this.changeInput('email')}\n                            label=\"Email\"\n                            value={editUser ? editUser.email : ''}\n                            type={'email'}\n                            fullWidth\n                        />\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"name\"\n                            onChange={this.changeInput('name')}\n                            label=\"Tên đầy đủ\"\n                            value={editUser ? editUser.name : ''}\n                            fullWidth\n                        />\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"desc\"\n                            onChange={this.changeInput('desc')}\n                            label=\"Tự giới thiệu\"\n                            value={editUser ? editUser.desc : ''}\n                            fullWidth\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.editUser(null)} color=\"primary\">\n                            Hủy\n                        </Button>\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\n                            Sửa thông tin\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nexport default function (props) {\n    return (\n        <AppContext.Consumer>\n            {(app) => <ListSupporters\n                {...{\n                    ...app,\n                    ...props,\n                }}\n            />}\n        </AppContext.Consumer>\n    )\n}\n","import React, {Component} from 'react'\nimport * as firebase from 'firebase'\nimport AppContext from '../../AppContext'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport IconButton from '@material-ui/core/IconButton'\nimport CommentIcon from '@material-ui/icons/Comment'\nimport moment from 'moment'\nimport {Button} from '@material-ui/core'\n\nclass Messages extends Component {\n    constructor(props) {\n        super(props)\n        const currentGroup = this.props.school\n        console.log(currentGroup)\n        this.convRef = firebase.database()\n            .ref(this.props.DB_PREFIX + '/conversations/group/' + currentGroup)\n        this.messRef = null\n\n        this.state = {\n            conversations: [],\n            current: [],\n            c: null,\n        }\n\n        this.convRef.on('child_added', this.updateConversation)\n        this.convRef.on('child_changed', this.updateConversation)\n    }\n\n    componentWillUnmount() {\n        this.convRef.off()\n    }\n\n    updateConversation = (snap) => {\n        const conversation = snap.val() || {}\n        conversation.$tid = snap.key\n\n        console.log(conversation)\n        if (!conversation.psid) return\n\n        var isnew = false\n        const newConversations = this.state.conversations.map(c => {\n            if (c.$tid === conversation.$tid) {\n                isnew = true\n                return conversation\n            }\n            return c\n        })\n        this.setState(({conversations}) => ({\n            conversations: !isnew ? [conversation, ...conversations] : newConversations\n        }))\n    }\n\n    displayMessage = (c) => () => {\n        this.setState({\n            c,\n        })\n        this.messRef = firebase.database()\n            .ref(this.props.DB_PREFIX + '/conversations/msg/' + this.props.school + '/' + c.$tid)\n\n        this.setState({current: []})\n        this.messRef.on('child_added', this.appendToMessageList)\n    }\n\n    appendToMessageList = (snap) => {\n        const msg = snap.val()\n        this.setState(({current}) => ({\n            current: [\n                ...current,\n                msg,\n            ]\n        }))\n    }\n\n    render() {\n        const {c, current} = this.state\n\n        return (\n            <div className=\"Messages\">\n                <div className={'text-muted'}>Quản lý tin nhắn</div>\n                {c ? <div className={'card card-body'}>\n                        <div className={'d-flex justify-content-between'}>\n                            <Button>\n                                {c.name}\n                            </Button>\n                            <Button onClick={() => {\n                                this.messRef.off()\n                                this.setState({c: null})\n                            }}>\n                                Quay lại\n                            </Button>\n                        </div>\n                        <div className={'MessagesWrapper'}>\n                            {current.map((m, i) => <div key={i} className={'Message'}>\n                                <div className={m.page ? 'Ours' : 'Yours'}>\n                                    <div className={'Textt'}>{m.text}</div>\n                                </div>\n                            </div>)}\n                        </div>\n                    </div> :\n                    <List>\n                        {this.state.conversations.map((c, i) => <ListItem key={i}>\n                            <ListItemText\n                                primary={c.name}\n                                secondary={`Tư vấn viên: ${c.answeredBy} - ${c.lastMsg ? 'Tin nhắn cuối: ' + moment(c.lastMsg.time).format('MMMM Do YYYY, h:mm:ss a') : ''} ${c.state < 2 ? ' (Đã kết thúc)' : ''}`}\n                            />\n\n                            <ListItemSecondaryAction>\n                                <IconButton aria-label=\"Comments\" onClick={this.displayMessage(c)}>\n                                    <CommentIcon/>\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        </ListItem>)}\n                    </List>\n                }\n            </div>\n        )\n    }\n}\n\nexport default function (props) {\n    return (\n        <AppContext.Consumer>\n            {(app) => <Messages\n                {...{\n                    ...app,\n                    ...props,\n                }}\n            />}\n        </AppContext.Consumer>\n    )\n}\n","import React, {Component} from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport * as firebase from 'firebase'\n\nclass EditSchool extends Component {\n    state = {\n        form: {\n            name: '',\n            key: '',\n            khoi: {\n                'tự_nhiên': false,\n                'xã_hội': false,\n                'lực_lượng_vũ_trang': false,\n                'cao_đẳng_nghề': false,\n            }\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.open) {\n            if (!prevProps.open || prevProps.open.key !== this.props.open.key) {\n                this.setState({\n                    form: {\n                        ...this.state.form,\n                        ...this.props.open.school,\n                        key: this.props.open.key,\n                    }\n                })\n            }\n        }\n    }\n\n    handleClose = () => {\n        this.props.toggle()\n    }\n\n    handleSave = () => {\n        const {form} = this.state\n        const {school} = this.props\n\n        firebase.database().ref(this.props.DB_PREFIX + '/groups').set({\n            ...school,\n            [form.key]: {\n                name: form.name,\n                khoi: form.khoi,\n            }\n        }).then(() => {\n            this.setState({\n                form: {\n                    name: '',\n                    key: '',\n                    khoi: {\n                        'tự_nhiên': false,\n                        'xã_hội': false,\n                        'lực_lượng_vũ_trang': false,\n                        'cao_đẳng_nghề': false,\n                    }\n                }\n            })\n            this.props.toggle()\n        })\n    }\n\n    changeInput = (key) => (e) => {\n        const {value} = e.target\n        this.setState(({form}) => ({\n            form: {\n                ...form,\n                [key]: value,\n            }\n        }))\n    }\n\n    changeCheckbox = (key) => (e) => {\n        const {checked} = e.target\n        this.setState(({form}) => ({\n            form: {\n                ...form,\n                khoi: {\n                    ...form.khoi,\n                    [key]: checked\n                }\n            }\n        }))\n    }\n\n    render() {\n        const {open, toggle} = this.props\n        const {form} = this.state\n        const {khoi} = form\n\n        return (\n            <div className=\"NewSchool\">\n                <Dialog\n                    open={open}\n                    onClose={toggle}\n                    aria-labelledby=\"form-dialog-title\"\n                    maxWidth={'lg'}\n                >\n                    <DialogTitle id=\"form-dialog-title\">Thêm trường mới</DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            margin=\"dense\"\n                            id=\"key\"\n                            onChange={this.changeInput('key')}\n                            label=\"Mã trường\"\n                            value={form.key}\n                            fullWidth\n                            disabled\n                        />\n                        <TextField\n                            margin=\"dense\"\n                            id=\"name\"\n                            onChange={this.changeInput('name')}\n                            value={form.name}\n                            label=\"Tên trường\"\n                            fullWidth\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['tự_nhiên']}\n                                    onChange={this.changeCheckbox('tự_nhiên')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối tự nhiên\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['xã_hội']}\n                                    onChange={this.changeCheckbox('xã_hội')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối xã hội\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['lực_lượng_vũ_trang']}\n                                    onChange={this.changeCheckbox('lực_lượng_vũ_trang')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Khối lực lượng vũ trang\"\n                        />\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    checked={khoi['cao_đẳng_nghề']}\n                                    onChange={this.changeCheckbox('cao_đẳng_nghề')}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Các trường cao đẳng nghề\"\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClose} color=\"primary\">\n                            Hủy\n                        </Button>\n                        <Button variant=\"contained\" onClick={this.handleSave} color=\"primary\">\n                            Sửa thông tin trường\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nexport default EditSchool\n","import React, {Component} from 'react'\nimport AppContext from '../../AppContext'\nimport * as firebase from 'firebase'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport NewSchool from './NewSchool'\nimport ListSupporters from './ListSupporters'\nimport Messages from './Messages'\nimport TextField from '@material-ui/core/TextField'\nimport EditSchool from './EditSchool'\n\nfunction xoa_dau(str) {\n    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, 'a');\n    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, 'e');\n    str = str.replace(/ì|í|ị|ỉ|ĩ/g, 'i');\n    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, 'o');\n    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, 'u');\n    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, 'y');\n    str = str.replace(/đ/g, 'd');\n    str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, 'A');\n    str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, 'E');\n    str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, 'I');\n    str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, 'O');\n    str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, 'U');\n    str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, 'Y');\n    str = str.replace(/Đ/g, 'D');\n    return str;\n}\n\nclass Admin extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            school: {},\n            addNewSchool: false,\n            search: '',\n        }\n\n        this.ref = firebase.database().ref(this.props.DB_PREFIX + '/groups').on('value', snap => {\n            var schools = snap.val()\n            Object.keys(schools).forEach(code => {\n                this.updateSchool(code, schools[code])\n            })\n        })\n    }\n\n    componentWillUnmount() {\n        this.ref.off()\n    }\n\n    updateSchool = (code, data) => {\n        if (this.props.user.role !== 1000\n            && code !== this.props.user.group) return\n        this.setState(({school}) => ({\n            school: {\n                ...school,\n                [code]: data,\n            }\n        }))\n    }\n\n    clickSchool = (s) => () => {\n        this.setState({\n            selectedSchool: s,\n            messages: null,\n        })\n    }\n\n    clickAllMessages = (s) => () => {\n        this.setState({\n            selectedSchool: null,\n            messages: s,\n        })\n    }\n\n    _addNewSchool = () => {\n        this.setState({\n            addNewSchool: !this.state.addNewSchool,\n        })\n    }\n\n    editSchool = (key, school) => () => {\n        if (!key || !school) return this.setState({\n            editSchool: null\n        })\n        this.setState({\n            editSchool: {\n                key, school\n            }\n        })\n    }\n\n    render() {\n        const {school, selectedSchool, addNewSchool, messages, editSchool} = this.state\n        const {user} = this.props\n        const showIfAdmin = {\n            'display': user.role === 1000 ? 'inherit' : 'none'\n        }\n\n        return (\n            <div className=\"Admin\">\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <Typography variant=\"h6\" color=\"inherit\">SCS - Admin</Typography>\n                    </Toolbar>\n                </AppBar>\n                <div className={'container mt-3'}>\n\n                    <Button variant=\"contained\" color=\"primary\" onClick={this._addNewSchool} style={showIfAdmin}>\n                        Thêm trường\n                    </Button>\n                    <br/>\n                    <TextField\n                        id=\"outlined-name\"\n                        label=\"Tìm kiếm theo tên trường\"\n                        margin=\"normal\"\n                        variant='outlined'\n                        fullWidth\n                        value={this.state.search}\n                        style={showIfAdmin}\n                        onChange={(e) => {\n                            const {value} = e.target\n                            this.setState({search: value})\n                        }}\n                    />\n                    <NewSchool\n                        open={addNewSchool}\n                        toggle={this._addNewSchool}\n                        school={school}\n                        {...this.props}\n                    />\n                    <EditSchool\n                        open={editSchool}\n                        toggle={this.editSchool()}\n                        school={school}\n                        {...this.props}\n                    />\n                    {selectedSchool ? <div className={'card mt-3'}>\n                        <div className={'card-header'}>\n\n                            <div className=\"d-flex justify-content-between\">\n                                <Button>\n                                    {school[selectedSchool].name}\n                                </Button>\n                                <Button onClick={() => this.setState({\n                                    selectedSchool: null,\n                                })}>\n                                    Quay lại\n                                </Button>\n                            </div>\n                        </div>\n                        <div className={'card-body'}>\n                            <div className=\"text-muted\">Quản lý danh sách tư vấn viên</div>\n                            <ListSupporters school={selectedSchool}/>\n                        </div>\n                    </div> : messages ? <div className={'card mt-3'}>\n                        <div className={'card-header'}>\n\n                            <div className=\"d-flex justify-content-between\">\n                                <Button>\n                                    {school[messages].name}\n                                </Button>\n                                <Button onClick={() => this.setState({\n                                    messages: null,\n                                })}>\n                                    Quay lại\n                                </Button>\n\n                            </div>\n                        </div>\n                        <div className={'card-body'}>\n                            <Messages school={messages}/>\n                        </div>\n                    </div> : <div className='row'>\n                        {Object.keys(school).filter(s => {\n                            const sc = school[s]\n                            return xoa_dau(sc.name.toLowerCase()).includes(xoa_dau(this.state.search.toLocaleLowerCase()))\n                        }).map((s, i) => <div className='col-12 col-md-6 col-lg-6 col-xl-6' key={i}>\n                            <div className={'card card-body mt-3 Card'}>\n                                    <span\n                                        onClick={this.clickSchool(s)}\n                                        className={'Cursor'}\n                                    >\n                                        {school[s].name}\n                                    </span>\n                                <Button\n                                    onClick={this.clickAllMessages(s)}\n                                >\n                                    Xem tin nhắn\n                                </Button>\n                                <Button\n                                    onClick={this.clickSchool(s)}\n                                >\n                                    Quản lý tư vấn viên\n                                </Button>\n                                <Button\n                                    style={showIfAdmin}\n                                    onClick={this.editSchool(s, school[s])}\n                                >\n                                    Sửa thông tin trường\n                                </Button>\n                            </div>\n                        </div>)}\n                    </div>}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default function (props) {\n    return (\n        <AppContext.Consumer>\n            {(app) => <Admin\n                {...{\n                    ...app,\n                    ...props,\n                }}\n            />}\n        </AppContext.Consumer>\n    )\n}\n","import React, {Component} from 'react'\nimport AppContext from './AppContext'\nimport PropTypes from 'prop-types'\nimport {withStyles} from '@material-ui/core/styles'\nimport * as firebase from 'firebase'\nimport Register from './containers/register/Register'\nimport Init from './containers/init/Init'\nimport Supporter from './layouts/supporter/Supporter'\nimport Admin from './layouts/admin/Admin'\n\nconst styles = {\n    root: {\n        flexGrow: 1,\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginLeft: -12,\n        marginRight: 20,\n    },\n}\n\nconst DB_PREFIX = process.env.REACT_APP_DB_PREFIX\n\nconst config = {\n    apiKey: 'AIzaSyBxBvZZPxo06HQWHWudRGytuJoSNw5LNX8',\n    authDomain: 'localhost',\n    databaseURL: 'https://page-tuyen-sinh.firebaseio.com',\n    projectId: 'page-tuyen-sinh',\n    storageBucket: 'page-tuyen-sinh.appspot.com',\n    messagingSenderId: '497060879105'\n}\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n        if (!firebase.apps.length) {\n            firebase.initializeApp(config);\n        }\n        this.state = {\n            appState: null,\n            DB_PREFIX,\n        }\n    }\n\n    componentWillMount() {\n        this._doLogin()\n    }\n\n    _doLogin = () => {\n        const urlParams = new URLSearchParams(window.location.search)\n        const email = urlParams.get('email')\n        const password = urlParams.get('password')\n\n        if (!email) return this.setState({\n            appState: 'new_user'\n        })\n\n        this.setState({\n            appState: 'loading',\n            email,\n            password,\n        })\n\n        firebase.auth().signInWithEmailAndPassword(\n            email, password\n        ).then((data) => {\n            this.setState({\n                uId: data.$uid\n            })\n            this._getUserInfo(data.user.uid)\n        }).catch((error) => {\n            if (error.message === 'The password is invalid or the user does not have a password.') return alert('Sai mật khẩu')\n            this._doRegister(email, password)\n        })\n    }\n\n    _getUserInfo = (uid) => {\n        firebase.database().ref(DB_PREFIX + '/users/' + uid).once('value')\n            .then(snap => {\n                firebase.database().ref(DB_PREFIX + '/groups').once('value').then(gr => {\n                    var groups = gr.val()\n                    console.log(groups)\n                    var userData = snap.val() || {}\n                    userData.$uid = uid\n                    if (!userData.role) {\n                        this.setState({\n                            appState: 'register',\n                            uid,\n                            groups,\n                            isLocked: userData.role === 0\n                        })\n                    } else {\n                        const {role} = userData\n                        this.setState({\n                            appState: role >= 800 ? 'admin' : 'supporter',\n                            user: userData,\n                        })\n                    }\n                })\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n    _doRegister = (email, password) => {\n        this.setState({\n            appState: 'init',\n        })\n\n        return firebase.auth().createUserWithEmailAndPassword(\n            email, password\n        ).then(() => {\n            this._doLogin()\n        }).catch(() => {\n            alert('Có lỗi xảy ra, vui lòng báo lại với admin')\n        })\n    }\n\n    _register = (user) => {\n        const userId = this.state.uid\n        return firebase.database().ref(DB_PREFIX + '/users/' + userId).set(\n            this.removeTempKeys(user)\n            , (err) => {\n                if (err) {\n                    console.log(err)\n                    alert('Có lỗi xảy ra')\n                }\n                this.setState({\n                    isLocked: true\n                })\n                alert('Đăng ký thành công, hãy chờ admin duyệt tài khoản của bạn')\n            });\n    }\n\n    _changeState = (changedState) => this.setState(changedState)\n\n    decodeFirebaseArray = (arr, id_name) => {\n        if (!arr || Array.isArray(arr)) return arr;\n        return Object.keys(arr).map(function (key) {\n            arr[key]['$' + id_name] = key;\n            return arr[key];\n        });\n    }\n\n    removeTempKeys = (obj) => {\n        var nObj = Object.assign({}, obj);\n        Object.keys(nObj).forEach(function (key) {\n            if (key.startsWith('$')) delete nObj[key];\n        });\n        return nObj;\n    }\n\n    renderApp = () => {\n        const {appState} = this.state\n        const combinedProps = {\n            ...this.props,\n            ...this.state,\n        }\n        if (appState === 'loading') return <p>\n            <center><br/><br/><img src=\"https://raw.githubusercontent.com/manh16nd/chon-truong/master/loading.gif\"\n                                   alt=\"Loading\"/></center>\n        </p>\n        if (appState === 'init') return <Init/>\n        if (appState === 'register') return <Register {...combinedProps}/>\n        if (appState === 'supporter') return <Supporter {...combinedProps}/>\n        if (appState === 'admin') return <Admin {...combinedProps}/>\n        return null\n    }\n\n    render() {\n\n        return (\n            <AppContext.Provider\n                value={{\n                    app: this.state,\n                    changeState: this._changeState,\n                    register: this._register,\n                    removeTempKeys: this.removeTempKeys,\n                    decodeFirebaseArray: this.decodeFirebaseArray,\n                    DB_PREFIX,\n                }}\n            >\n                {this.renderApp()}\n            </AppContext.Provider>\n        )\n    }\n}\n\nApp.propTypes = {\n    classes: PropTypes.object.isRequired,\n}\n\nexport default withStyles(styles)(App)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { BrowserRouter } from 'react-router-dom'\nimport './scss/index.scss'\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'))\n"],"sourceRoot":""}